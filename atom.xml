<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LXYu.â™¡</title>
  
  <subtitle>Ë™ áµ• Ë™ é€™æ˜¯æˆ‘çš„åœ°æ–¹</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-11-08T16:06:09.717Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>é²¤å°é±¼</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Trip to Tibet</title>
    <link href="http://yoursite.com/2020/11/08/tibetTrip/"/>
    <id>http://yoursite.com/2020/11/08/tibetTrip/</id>
    <published>2020-11-08T13:02:41.000Z</published>
    <updated>2020-11-08T16:06:09.717Z</updated>
    
    <content type="html"><![CDATA[<p>  ğŸ¤¦â€â™€ï¸2020å¹´çœŸçš„æ˜¯å¾ˆç³Ÿç³•äº†ï¼Œç”±äºç–«æƒ…å¥½å‡ æ¬¡å‡ºè¡Œçš„è®¡åˆ’éƒ½å–æ¶ˆäº†ï¼Œå¥½åœ¨åæœˆä¸‹æ—¬èµ¶ä¸Šäº†è¥¿è—çš„ç§‹å¤©ã€‚å’Œå¥½æœ‹å‹æå‰ä¹°äº†æœºç¥¨æŠ¥äº†å›¢ï¼Œå¥½å·§ä¸å·§çš„å°±åœ¨å‰å‡ å¤©é’å²›æŠ¥å‡ºäº†å‡ ä¾‹ğŸ™‚ï¼Œä¸è¿‡è¿˜æ˜¯å£®äº†å£®èƒ†ç²—å‘äº†~ ğŸ˜</p><a id="more"></a><h3 id="âœˆï¸-DAY1"><a href="#âœˆï¸-DAY1" class="headerlink" title="âœˆï¸ DAY1"></a>âœˆï¸ DAY1</h3><p>ç¬¬ä¸€å¤©å¤§å®¶éƒ½æ˜¯å…¨å®‡å®™å‡ºå‘åˆ°æ‹‰è¨é›†åˆï¼Œå› ä¸ºåˆšåˆ°æ‹‰è¨æœ‰äº›é«˜åï¼Œæ‰€ä»¥åˆ°äº†ä»¥åå°±åœ¨é…’åº—æ­‡ç€äº†ï¼Œåƒé¥­ä¹Ÿå«çš„å¤–å–å“ˆå“ˆğŸ˜ï¼Œæ„Ÿå—æœ€æ˜æ˜¾çš„å°±æ˜¯8ç‚¹å¤šå¤©æ‰é»‘ï¼Œæ²¡æƒ³è±¡ä¸­é‚£ä¹ˆå†·ã€‚<br><img src="/2020/11/08/tibetTrip/day1.jpeg" alt></p><h3 id="ğŸŒ‡-DAY2"><a href="#ğŸŒ‡-DAY2" class="headerlink" title="ğŸŒ‡ DAY2"></a>ğŸŒ‡ DAY2</h3><p>ç¬¬äºŒå¤©æˆ‘ä»¬å…ˆæ˜¯å»äº† <code>å¸ƒè¾¾æ‹‰å®«</code> ï¼Œæœç„¶é•¿äº†ä¸€å‰¯äººæ°‘å¸çš„æ ·å­ã€‚ä»è¿œå¤„çœ‹å¸ƒè¾¾æ‹‰å®«çœŸçš„æ˜¯å¾ˆæ°”æ´¾çš„ï¼Œæ®¿å†…çš„ç»“æ„å’Œè£…é¥°ä¹Ÿæ˜¯éå¸¸çš„è®²ç©¶ï¼Œå¾ˆæœ‰å½“åœ°çš„ç‰¹è‰²ã€‚å¯¼æ¸¸ä¼‘å“¥ä¹Ÿç»™æˆ‘ä»¬è¯¦ç»†çš„è®²äº†è¥¿è—çš„å†å²å’Œæ–‡åŒ–ï¼ŒçœŸçš„ä»å†…å¿ƒæ„Ÿè§‰åˆ°è¿™å—åœ°æ–¹çš„ç¥åœ£ã€‚ä¹‹åè¿˜å»äº† <code>å¤§æ˜­å¯º</code> å’Œ <code>å…«å»“è¡—</code> ï¼Œè¿™éƒ½æ˜¯æ¥è¥¿è—å¿…å»çš„æ™¯ç‚¹å•¦~<br><img src="/2020/11/08/tibetTrip/day2-0.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-3.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-7.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-8.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-9.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-12.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day2-13.jpeg" alt></p><h3 id="ğŸœ-DAY3"><a href="#ğŸœ-DAY3" class="headerlink" title="ğŸœ DAY3"></a>ğŸœ DAY3</h3><p>ç¬¬ä¸‰å¤©å»äº†æµ·æ‹”æ¯”æ‹‰è¨ä½ä¸€äº›çš„æ—èŠï¼Œç®—æ˜¯æ•‘äº†æˆ‘å’Œæœ‹å‹ä¸€å‘½å“ˆå“ˆã€‚å»äº†ä¸€ä¸ªæ°´æ˜¯ç¿¡ç¿ è‰²çš„æ¹– â€”â€” <code>å·´æ¾æª</code>ï¼ŒçœŸçš„å¥½ç¾é£æ™¯ç‰¹åˆ«çš„å¥½ã€‚æ™šä¸Šä½åœ¨äº†ç»“å·´æ‘ï¼Œå½“åœ°å¯çˆ±çš„å°å­©å­è¿˜å’Œæˆ‘ä»¬æ‰“æ‹›å‘¼ã€‚å¯¹äº†ï¼Œæ—èŠçš„é…¸å¥¶è¶…å¥½å–ï¼<br><img src="/2020/11/08/tibetTrip/day3-1.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day3-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day3-3.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day3-4.jpeg" alt></p><h3 id="ğŸ”-DAY4"><a href="#ğŸ”-DAY4" class="headerlink" title="ğŸ” DAY4"></a>ğŸ” DAY4</h3><p>ç¬¬å››å¤©æˆ‘ä»¬å»äº†<code>é›…é²è—å¸ƒå¤§å³¡è°·</code>ï¼Œè¿˜å»äº†è¢«ç§°ä¸ºâ€åäººä¹ä¸è§â€œçš„ï¼Œè¢«ã€Šä¸­å›½å›½å®¶åœ°ç†ã€‹æ‚å¿—è¯„é€‰ä¸ºâ€œä¸­å›½æœ€ç¾çš„å±±å³°â€ â€”â€” <code>å—è¿¦å·´ç“¦å³°</code>ã€‚çœŸçš„æ˜¯éå¸¸çš„ç¾ï¼Œè€Œä¸”è¿æ°”çˆ†æ£šï¼Œå‚æ™šçœ‹åˆ°äº†æ—¥ç…§é‡‘å±±çš„ç¾æ™¯ã€‚åœ¨æˆ‘å¿ƒç›®ä¸­è¿™æ˜¯æˆ‘æœ€å–œæ¬¢æ™¯ç‚¹äº†ã€‚<br><img src="/2020/11/08/tibetTrip/day4-1.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day4-4.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day4-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day4-3.jpeg" alt></p><h3 id="ğŸšŒ-DAY5"><a href="#ğŸšŒ-DAY5" class="headerlink" title="ğŸšŒ DAY5"></a>ğŸšŒ DAY5</h3><p>ç¬¬äº”å¤©ä¸»è¦æ˜¯èµ¶è·¯ï¼Œä¸­é€”å»äº† <code>ç¬¬åä¸‰ä¸–è¾¾èµ–å–‡å˜›çš„å‡ºç”Ÿåœ°</code> å’Œ <code>åƒå¹´æ ¸æ¡ƒå›­</code>ï¼Œæ¡äº†ä¸€é¢—ç™½ç™½å«©å«©çš„åƒå¹´æ ¸æ¡ƒæ ‘çš„å°æ ¸æ¡ƒå˜¿å˜¿ã€‚å…¶ä»–çš„æ—¶é—´éƒ½åœ¨è½¦ä¸Šç¡è§‰åƒä¸œè¥¿ï¼Œæ™šä¸Šåˆ°äº†åŠ æŸ¥å¿åå»åƒäº†å½“åœ°çš„é¥­è¿˜å–äº†é…¥æ²¹èŒ¶ï¼Œé—»ç€è¿˜æ˜¯æŒºé¦™çš„ä½†æ˜¯æˆ‘æœ‰ç‚¹å–ä¸æƒ¯å†…ä¸ªå‘³é“ã€‚å› ä¸ºåœ¨æ—èŠé€‚åº”äº†ä¸¤å¤©ï¼Œæˆ‘å’Œæœ‹å‹çš„é«˜åç—‡çŠ¶æ˜æ˜¾çš„å¥½è½¬äº†å¾ˆå¤šï¼Œä¸çŸ¥ä¸è§‰çš„è¿™æ¬¡æ—…è¡Œå°±å·²ç»è¿‡äº†ä¸€åŠäº†ï¼Œç¬¬å…­å¤©è¦å»çš„æ˜¯è¿™æ¬¡æµ·æ‹”æœ€é«˜çš„åœ°æ–¹ï¼Œå› ä¸ºå®³æ€•é«˜åæ˜¯å‡†å¤‡äº†æ°§æ°”ç“¶ï¼Œç©¿ä¸Šäº†å¤§ç¾½ç»’æœã€‚</p><h3 id="ğŸ—»-DAY6"><a href="#ğŸ—»-DAY6" class="headerlink" title="ğŸ—» DAY6"></a>ğŸ—» DAY6</h3><p>è¿™æ¬¡è¡Œç¨‹æœ€é«˜ç‚¹ï¼Œæµ·æ‹”5350 â€”â€” <code>åœ£æ¹–æ‹‰å§†æ‹‰æª</code> ï¼Œæ¯å½“å¯»è®¿è¾¾èµ–å–‡å˜›æ´»ä½›çš„è½¬ä¸–çµç«¥ä¹‹å‰ï¼Œéƒ½è¦åˆ°æ­¤è§‚æ¹–åœç›¸ï¼Œä»¥å—ç¥ç¤ºï¼Œè€Œä¸”æ¯ä¸–è¾¾èµ–å–‡å˜›éƒ½è¦åˆ°â€œç¥æ¹–â€æœæ‹œä¸€æ¬¡ã€‚æˆ‘ä»¬åˆ°äº†å±±è„šä¸‹ä»¥åè¦è‡ªå·±èµ°ä¸Šå»åˆ°æœ€é«˜å¤„æ‰èƒ½çœ‹è§æ‹‰å§†æ‹‰æªï¼Œçˆ¬äº†å¤§æ¦‚ä¸åˆ°ä¸€å°æ—¶åˆ°äº†å±±é¡¶ã€‚æŒ‚ä¸Šäº†è‡ªå·±çš„é‡‘å¸†ï¼Œä¸ºå®¶äººæœ‹å‹ç¥ˆç¦ã€‚<br><img src="/2020/11/08/tibetTrip/day6-1.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day6-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day6-3.jpeg" alt></p><h3 id="ğŸŒŒ-DAY7"><a href="#ğŸŒŒ-DAY7" class="headerlink" title="ğŸŒŒ DAY7"></a>ğŸŒŒ DAY7</h3><p>ç¬¬ä¸ƒå¤©æœŸå¾…å·²ä¹…çš„ <code>ç¾Šå“é›æª</code>ï¼Œæˆ‘åªèƒ½è¯´å¤ª è“ äº†ï¼ä¸€ä¸‡ä¸ªè“ï¼æ³¢å…‰ç²¼ç²¼çš„çš„æ¹–æ°´ï¼ŒçœŸçš„æ˜¯èƒ½å‡€åŒ–å¿ƒçµã€‚æ¹–è¾¹è¿˜æœ‰å‡ åªä¾›æ‹ç…§çš„è—ç’ï¼Œä¸€ç‚¹éƒ½ä¸å‡¶ï¼Œç‰¹åˆ«ä¹–ã€‚<br><img src="/2020/11/08/tibetTrip/day7-1.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day7-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day7-3.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day7-4.jpeg" alt></p><h3 id="ğŸ-DAY8"><a href="#ğŸ-DAY8" class="headerlink" title="ğŸ DAY8"></a>ğŸ DAY8</h3><p>ç¬¬å…«å¤©ä¹Ÿæ˜¯æœ€åä¸€å¤©ï¼Œæˆ‘ä»¬å»äº† <code>çº³æœ¨æª</code> æ˜¯è¥¿è—ä¸‰å¤§åœ£æ¹–ä¹‹ä¸€ï¼Œåªèƒ½è¯´æ˜¯æˆ‘è®¤ä¸ºå¤©å ‚çš„æ ·å­ï¼Œè¿œå¤„çš„é›ªå±±ã€æ¸…æ¾ˆçš„æ¹–é¢â€¦â€¦<br>æ°¸è¿œä¹Ÿå¿˜ä¸äº†è¿™ä¸ªè®©æˆ‘æƒŠå¹çš„åœ°æ–¹ğŸ’™ã€‚<br><img src="/2020/11/08/tibetTrip/day8-1.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day8-2.jpeg" alt><br><img src="/2020/11/08/tibetTrip/day8-3.jpeg" alt></p><h3 id="ğŸ‘©ğŸ¼â€ğŸ’»-DAY9"><a href="#ğŸ‘©ğŸ¼â€ğŸ’»-DAY9" class="headerlink" title="ğŸ‘©ğŸ¼â€ğŸ’» DAY9"></a>ğŸ‘©ğŸ¼â€ğŸ’» DAY9</h3><p>èµ·æ—©å›åŒ—äº¬ï¼Œè¿˜æ˜¯æŒºèˆä¸å¾—è¿™é‡Œçš„é£æ™¯ã€è¿™é‡Œçš„æ–‡åŒ–ã€è¿™é‡Œçš„äºº<br>ä¸€ä¸ªç¼ºæ°§ä½†æ˜¯ä¸ç¼ºä¿¡ä»°çš„åœ°æ–¹ï¼Œä¸‹æ¬¡è¿˜æ¥ã€‚<br>à½–à½€à¾²à¼‹à½¤à½²à½¦à¼‹à½–à½‘à½ºà¼‹à½£à½ºà½‚à½¦à¼ </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  ğŸ¤¦â€â™€ï¸2020å¹´çœŸçš„æ˜¯å¾ˆç³Ÿç³•äº†ï¼Œç”±äºç–«æƒ…å¥½å‡ æ¬¡å‡ºè¡Œçš„è®¡åˆ’éƒ½å–æ¶ˆäº†ï¼Œå¥½åœ¨åæœˆä¸‹æ—¬èµ¶ä¸Šäº†è¥¿è—çš„ç§‹å¤©ã€‚å’Œå¥½æœ‹å‹æå‰ä¹°äº†æœºç¥¨æŠ¥äº†å›¢ï¼Œå¥½å·§ä¸å·§çš„å°±åœ¨å‰å‡ å¤©é’å²›æŠ¥å‡ºäº†å‡ ä¾‹ğŸ™‚ï¼Œä¸è¿‡è¿˜æ˜¯å£®äº†å£®èƒ†ç²—å‘äº†~ ğŸ˜&lt;/p&gt;
    
    </summary>
    
      <category term="trip" scheme="http://yoursite.com/categories/trip/"/>
    
    
      <category term="trip" scheme="http://yoursite.com/tags/trip/"/>
    
  </entry>
  
  <entry>
    <title>Gridç½‘æ ¼å¸ƒå±€å¸¸ç”¨å±æ€§æ€»ç»“</title>
    <link href="http://yoursite.com/2020/11/08/grid/"/>
    <id>http://yoursite.com/2020/11/08/grid/</id>
    <published>2020-11-08T12:39:29.000Z</published>
    <updated>2020-11-08T12:52:43.216Z</updated>
    
    <content type="html"><![CDATA[<p>Grid å¸ƒå±€ä¸ Flex å¸ƒå±€æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œéƒ½å¯ä»¥æŒ‡å®šå®¹å™¨å†…éƒ¨å¤šä¸ªé¡¹ç›®çš„ä½ç½®ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬ä¹Ÿå­˜åœ¨é‡å¤§åŒºåˆ«ã€‚</p><p>Flex å¸ƒå±€æ˜¯è½´çº¿å¸ƒå±€ï¼Œåªèƒ½æŒ‡å®šâ€é¡¹ç›®â€é’ˆå¯¹è½´çº¿çš„ä½ç½®ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»´å¸ƒå±€ã€‚Grid å¸ƒå±€åˆ™æ˜¯å°†å®¹å™¨åˆ’åˆ†æˆâ€è¡Œâ€å’Œâ€åˆ—â€ï¼Œäº§ç”Ÿå•å…ƒæ ¼ï¼Œç„¶åæŒ‡å®šâ€é¡¹ç›®æ‰€åœ¨â€çš„å•å…ƒæ ¼ï¼Œå¯ä»¥çœ‹ä½œæ˜¯äºŒç»´å¸ƒå±€ã€‚Grid å¸ƒå±€è¿œæ¯” Flex å¸ƒå±€å¼ºå¤§ã€‚</p><p>ä»¥ä¸Šä¸¤æ®µè¯éƒ½æ˜¯é˜®ä¸€å³°å¤§ç¥è¯´çš„å“ˆ~ğŸ˜†<br>æœ¬ç¯‡ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦çš„æ¦‚å¿µå’Œå¸¸ç”¨çš„å±æ€§ğŸ˜</p><a id="more"></a><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="å®¹å™¨å’Œé¡¹ç›®"><a href="#å®¹å™¨å’Œé¡¹ç›®" class="headerlink" title="å®¹å™¨å’Œé¡¹ç›®"></a>å®¹å™¨å’Œé¡¹ç›®</h4><blockquote><p>é‡‡ç”¨ç½‘æ ¼å¸ƒå±€çš„åŒºåŸŸï¼Œç§°ä¸ºâ€å®¹å™¨â€œï¼ˆcontainerï¼‰ã€‚å®¹å™¨å†…éƒ¨é‡‡ç”¨ç½‘æ ¼å®šä½çš„å­å…ƒç´ ï¼Œç§°ä¸ºâ€é¡¹ç›®â€œï¼ˆitemï¼‰ã€‚</p></blockquote><h4 id="è¡Œå’Œåˆ—"><a href="#è¡Œå’Œåˆ—" class="headerlink" title="è¡Œå’Œåˆ—"></a>è¡Œå’Œåˆ—</h4><blockquote><p>å®¹å™¨é‡Œé¢çš„æ°´å¹³åŒºåŸŸç§°ä¸ºâ€è¡Œâ€œï¼ˆrowï¼‰ï¼Œå‚ç›´åŒºåŸŸç§°ä¸ºâ€åˆ—â€œï¼ˆcolumnï¼‰ã€‚</p></blockquote><h4 id="å•å…ƒæ ¼"><a href="#å•å…ƒæ ¼" class="headerlink" title="å•å…ƒæ ¼"></a>å•å…ƒæ ¼</h4><blockquote><p>è¡Œå’Œåˆ—äº¤å‰åŒºåŸŸï¼Œç§°ä¸ºâ€å•å…ƒæ ¼â€œï¼ˆcellï¼‰ã€‚</p></blockquote><h4 id="ç½‘æ ¼çº¿"><a href="#ç½‘æ ¼çº¿" class="headerlink" title="ç½‘æ ¼çº¿"></a>ç½‘æ ¼çº¿</h4><blockquote><p>åˆ’åˆ†ç½‘æ ¼çš„çº¿ï¼Œç§°ä¸ºâ€ç½‘æ ¼çº¿â€œï¼ˆgrid lineï¼‰ã€‚æ°´å¹³ç½‘æ ¼çº¿åˆ’åˆ†å‡ºè¡Œï¼Œå‚ç›´ç½‘æ ¼çº¿åˆ’åˆ†å‡ºåˆ—ã€‚</p></blockquote><h3 id="å®¹å™¨å±æ€§"><a href="#å®¹å™¨å±æ€§" class="headerlink" title="å®¹å™¨å±æ€§"></a>å®¹å™¨å±æ€§</h3><ul><li><code>display: grid</code>  æŒ‡å®šä¸€ä¸ªå®¹å™¨é‡‡ç”¨ç½‘æ ¼å¸ƒå±€</li><li><code>display: inline-grid</code> æŒ‡å®šè¯¥å…ƒç´ ä¸ºè¡Œå†…å…ƒç´ ï¼Œå†…éƒ¨é‡‡ç”¨ç½‘æ ¼å¸ƒå±€</li><li><code>grid-template-columnsï¼š10px 20px 30%</code> åˆ—å®½ï¼Œæ¯ä¸ªå€¼å’Œæ¯åˆ—ä¸€ä¸€å¯¹åº”ï¼Œå¯åƒç´ æˆ–ç™¾åˆ†æ•°</li><li><code>grid-template-rowsï¼š10px 20px 30%</code> è¡Œé«˜ï¼Œæ¯ä¸ªå€¼å’Œæ¯è¡Œä¸€ä¸€å¯¹åº”ï¼Œå¯åƒç´ æˆ–ç™¾åˆ†æ•°</li><li><code>repeat()</code> ç®€åŒ–é‡å¤çš„å€¼ï¼Œä¾‹ï¼šgrid-template-rows: repeat(3, 100px);</li><li><code>auto-fillå…³é”®å­—</code> è‡ªåŠ¨å¡«å……ä¸ªæ•°ï¼Œä¾‹ï¼šgrid-template-columns: repeat(auto-fill, 100px);</li><li><code>frå…³é”®å­—</code> æ¯”ä¾‹å…³ç³»ï¼Œä¾‹ï¼šgrid-template-columns: 1fr 1fr;</li><li><code>minmax()</code> é•¿åº¦èŒƒå›´ï¼Œä¾‹ï¼šgrid-template-columns: 1fr 1fr minmax(100px, 1fr);</li><li><code>autoå…³é”®å­—</code> è‡ªå®šå®½åº¦ï¼Œä¾‹ï¼šgrid-template-columns: 100px auto 100px;</li><li><code>[]å¯å®šä¹‰ç½‘æ ¼çº¿åå­—</code> ä¾‹ï¼šgrid-template-columns: [c1] 100px [c2] 100px [c3] auto [c4];</li><li><code>row-gap:10px</code> è¡Œé—´è·</li><li><code>column-gap: 20px</code> åˆ—é—´è·</li><li><code>gap: 10px 20px</code> è¡Œé—´è·å’Œåˆ—é—´è·çš„åˆå¹¶å†™æ³•</li><li><code>grid-auto-flow: row</code> æ’åˆ—é¡ºåºï¼Œå…ˆè¡Œååˆ—</li><li><code>grid-auto-flow: row dense</code> æ’åˆ—é¡ºåºï¼Œå…ˆè¡Œååˆ—ï¼Œç´§å¯†å¡«æ»¡</li><li><code>grid-auto-flow: column</code> æ’åˆ—é¡ºåºï¼Œå…ˆåˆ—åè¡Œ</li><li><code>grid-auto-flow: column dense</code> æ’åˆ—é¡ºåºï¼Œå…ˆåˆ—åè¡Œï¼Œç´§å¯†å¡«æ»¡</li><li><code>justify-items: start | end | center | stretch;</code> è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰</li><li><code>align-items: start | end | center | stretch;</code> è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰</li><li><code>place-items: &lt;align-items&gt; &lt;justify-items&gt;;</code> align-itemså±æ€§å’Œjustify-itemså±æ€§çš„åˆå¹¶ç®€å†™å½¢å¼ã€‚ä¾‹ï¼šplace-items: start end;</li><li><code>justify-content: start | end | center | stretch | space-around | space-between | space-evenly;</code> æ•´ä¸ªå†…å®¹åŒºåŸŸåœ¨å®¹å™¨é‡Œé¢çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰</li><li><code>align-content: start | end | center | stretch | space-around | space-between | space-evenly;</code> æ•´ä¸ªå†…å®¹åŒºåŸŸçš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰</li><li><code>place-content: &lt;align-content&gt; &lt;justify-content&gt;</code> align-contentå±æ€§å’Œjustify-contentå±æ€§çš„åˆå¹¶ç®€å†™å½¢å¼ã€‚</li></ul><h3 id="é¡¹ç›®å±æ€§"><a href="#é¡¹ç›®å±æ€§" class="headerlink" title="é¡¹ç›®å±æ€§"></a>é¡¹ç›®å±æ€§</h3><ul><li><code>grid-column-start: 2</code> æŒ‡å®šé¡¹ç›®çš„å·¦è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿</li><li><code>grid-column-end: 3</code> æŒ‡å®šé¡¹ç›®çš„å³è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿</li><li><code>grid-row-start: 4</code> æŒ‡å®šé¡¹ç›®çš„ä¸Šè¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿</li><li><code>grid-row-end: 5</code> æŒ‡å®šé¡¹ç›®çš„ä¸‹è¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿</li><li><code>spanå…³é”®å­—</code> è¡¨ç¤ºâ€è·¨è¶Šâ€œï¼Œå³å·¦å³è¾¹æ¡†ï¼ˆä¸Šä¸‹è¾¹æ¡†ï¼‰ä¹‹é—´è·¨è¶Šå¤šå°‘ä¸ªç½‘æ ¼ï¼Œä¾‹ï¼šgrid-column-start: span 2;</li><li><code>grid-column å±æ€§</code> æ˜¯grid-column-startå’Œgrid-column-endçš„åˆå¹¶ç®€å†™å½¢å¼ï¼Œä¾‹ï¼šgrid-column: 1 / 2;</li><li><code>grid-row å±æ€§</code> æ˜¯grid-row-startå±æ€§å’Œgrid-row-endçš„åˆå¹¶ç®€å†™å½¢å¼ï¼Œä¾‹ï¼šgrid-row: 1 / 3;</li><li><code>grid-area å±æ€§</code> æŒ‡å®šé¡¹ç›®æ”¾åœ¨å“ªä¸€ä¸ªåŒºåŸŸï¼Œä¾‹ï¼šgrid-area: e;</li><li><code>justify-self: start | end | center | stretch</code> è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰</li><li><code>align-self: start | end | center | stretch</code> è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰</li><li><code>place-self: &lt;align-self&gt; &lt;justify-self&gt;</code> æ˜¯align-selfå±æ€§å’Œjustify-selfå±æ€§çš„åˆå¹¶ç®€å†™å½¢å¼</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Grid å¸ƒå±€ä¸ Flex å¸ƒå±€æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œéƒ½å¯ä»¥æŒ‡å®šå®¹å™¨å†…éƒ¨å¤šä¸ªé¡¹ç›®çš„ä½ç½®ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬ä¹Ÿå­˜åœ¨é‡å¤§åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;Flex å¸ƒå±€æ˜¯è½´çº¿å¸ƒå±€ï¼Œåªèƒ½æŒ‡å®šâ€é¡¹ç›®â€é’ˆå¯¹è½´çº¿çš„ä½ç½®ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»´å¸ƒå±€ã€‚Grid å¸ƒå±€åˆ™æ˜¯å°†å®¹å™¨åˆ’åˆ†æˆâ€è¡Œâ€å’Œâ€åˆ—â€ï¼Œäº§ç”Ÿå•å…ƒæ ¼ï¼Œç„¶åæŒ‡å®šâ€é¡¹ç›®æ‰€åœ¨â€çš„å•å…ƒæ ¼ï¼Œå¯ä»¥çœ‹ä½œæ˜¯äºŒç»´å¸ƒå±€ã€‚Grid å¸ƒå±€è¿œæ¯” Flex å¸ƒå±€å¼ºå¤§ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šä¸¤æ®µè¯éƒ½æ˜¯é˜®ä¸€å³°å¤§ç¥è¯´çš„å“ˆ~ğŸ˜†&lt;br&gt;æœ¬ç¯‡ä¸»è¦è®°å½•ä¸€äº›ä¸»è¦çš„æ¦‚å¿µå’Œå¸¸ç”¨çš„å±æ€§ğŸ˜&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="http://yoursite.com/categories/css/"/>
    
    
      <category term="css" scheme="http://yoursite.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>åå°ç®¡ç†ç³»ç»Ÿelement-adminâ€”â€”äºŒæ¬¡å°è£…Tableç»„ä»¶</title>
    <link href="http://yoursite.com/2020/09/09/sTable/"/>
    <id>http://yoursite.com/2020/09/09/sTable/</id>
    <published>2020-09-09T06:34:51.000Z</published>
    <updated>2020-09-20T08:46:37.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>é¡¹ç›®ä¸­ä½¿ç”¨è¡¨æ ¼ç°å¸¸çš„é¢‘ç¹ğŸ‘¿ï¼Œæ‰€ä»¥ä¸€ä¸ªç®€æ´çš„è¡¨æ ¼ç»„ä»¶ï¼Œæ—¢èƒ½è®©ä»£ç å˜å¾—ä¼˜é›…è¿˜å¯ä»¥çœå»å¾ˆå¤šé‡å¤çš„æ“ä½œã€‚<br><a id="more"></a></p><h2 id="elementå°è£…è°ƒç”¨"><a href="#elementå°è£…è°ƒç”¨" class="headerlink" title="elementå°è£…è°ƒç”¨"></a>elementå°è£…è°ƒç”¨</h2><p>element-uiå·²ç»ä¸ºæˆ‘ä»¬å°è£…å¥½äº†ä¸€å±‚ï¼Œè¿™æ˜¯element-uiçš„å†™æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-table</span><br><span class="line">    :data=<span class="string">"tableData"</span></span><br><span class="line">    style=<span class="string">"width: 500px"</span>&gt;</span><br><span class="line">    &lt;el-table-column prop=<span class="string">"name"</span> label=<span class="string">"å§“å"</span> width=<span class="string">"180"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">    &lt;el-table-column label="æ—¥æœŸ" width="120"&gt;</span><br><span class="line">      &lt;template slot-scope="scope"&gt;&#123;&#123; 'åŠ ä¸ªå‰ç¼€ğŸ˜' + scope.row.date &#125;&#125;&lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column fixed="right" label="æ“ä½œ" width="120"&gt;</span><br><span class="line">      &lt;template slot-scope="scope"&gt;</span><br><span class="line">        &lt;el-button @click.native.prevent="deleteRow(scope.$index, tableData)" type="text" size="small"&gt;</span><br><span class="line">          ç§»é™¤</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        tableData: [&#123;</span><br><span class="line">          date: '2016-05-02',</span><br><span class="line">          name: 'ç‹å°è™',</span><br><span class="line">          address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„'</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">          date: '2016-05-02',</span><br><span class="line">          name: 'ç‹å°è™',</span><br><span class="line">          address: 'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„'</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      deleteRow(index, rows) &#123;</span><br><span class="line">        rows.splice(index, 1)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p><img src="/2020/09/09/sTable/table1.png" alt="element-table"></p><p>è™½ç„¶å·²ç»å°è£…çš„å¾ˆå¥½äº†ï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯ä¸å¤Ÿç®€æ´ï¼Œå¹¶ä¸”è¿˜æƒ³å°†åˆ†é¡µåŠŸèƒ½ã€loadingåŠŸèƒ½ã€æ‹–åŠ¨åŠŸèƒ½éƒ½é€šè¿‡é…ç½®å‚æ•°çš„æ–¹å¼æ¥é€‰æ‹©æ˜¯å¦è°ƒç”¨ï¼Œæ‰€ä»¥è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œçœ‹ä¸€ä¸‹å°è£…è¿‡åçš„è°ƒç”¨ä»£ç ï¼š</p><h2 id="äºŒæ¬¡å°è£…åè°ƒç”¨"><a href="#äºŒæ¬¡å°è£…åè°ƒç”¨" class="headerlink" title="äºŒæ¬¡å°è£…åè°ƒç”¨"></a>äºŒæ¬¡å°è£…åè°ƒç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;s-table ref=<span class="string">"sTable"</span> :data=<span class="string">"loadData"</span> :columns=<span class="string">"columns"</span>&gt;</span><br><span class="line">    &lt;div slot=<span class="string">"action"</span> slot-scope=<span class="string">"&#123;row&#125;"</span>&gt;</span><br><span class="line">      &lt;el-button type=<span class="string">"primary"</span> @click=<span class="string">"deleteRow(row)"</span>&gt;ç§»é™¤&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/s-table&gt;</span></span><br><span class="line"><span class="regexp">&lt;template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import STable from '@/</span>components/table/index<span class="string">'</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">  components: &#123;</span></span><br><span class="line"><span class="string">    STable</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  data () &#123;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">      columns: [</span></span><br><span class="line"><span class="string">        &#123;name: '</span>å§“å<span class="string">', desc: '</span>name<span class="string">', width: '</span><span class="number">100</span><span class="string">'&#125;,</span></span><br><span class="line"><span class="string">        &#123;name: '</span>æ—¥æœŸ<span class="string">', desc: '</span>date<span class="string">', width: '</span><span class="number">220</span><span class="string">', filter: true, filterFun: (row) =&gt; &#123; return `åŠ ä¸ªå‰ç¼€ğŸ˜ $&#123;row.date&#125;` &#125;&#125;,</span></span><br><span class="line"><span class="string">        &#123;name: '</span>æ“ä½œ<span class="string">', desc: '</span>action<span class="string">', width: '</span><span class="number">320</span><span class="string">', slot: true, fixed: '</span>right<span class="string">'&#125;</span></span><br><span class="line"><span class="string">      ],</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  methods: &#123;</span></span><br><span class="line"><span class="string">    loadData: param =&gt; &#123;</span></span><br><span class="line"><span class="string">      return getData()</span></span><br><span class="line"><span class="string">        .then(res =&gt; &#123;</span></span><br><span class="line"><span class="string">          return res</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2020/09/09/sTable/table2.png" alt="s-table"></p><p>å¼•å…¥ç»„ä»¶ä¹‹åï¼Œtableçš„æ•°æ®ç”±ç»„ä»¶å†…éƒ¨ä¸»åŠ¨è°ƒç”¨å¹¶è¿”å›ï¼Œè¡¨æ ¼çš„æ¯ä¸€åˆ—ä¸å†æ˜¯ <code>el-table-column</code> æ ‡ç­¾ï¼Œè€Œæ˜¯ç”± <code>columns</code> æ•°ç»„ä¼ é€’æ¯ä¸€åˆ—ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬äº† <code>loadingã€pagination</code> ç»„ä»¶çš„é€»è¾‘ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¤„ç†åŒæ ·çš„é€»è¾‘äº†ã€‚å…¶ä¸­è¿˜åŒ…å«äº†æ‹–æ‹½æ’åºã€é€‰ä¸­æ“ä½œç­‰å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p><h2 id="å¼€å§‹å†™"><a href="#å¼€å§‹å†™" class="headerlink" title="å¼€å§‹å†™"></a>å¼€å§‹å†™</h2><p>ä¸‹é¢çœ‹ä¸€ä¸‹äºŒæ¬¡å°è£…tableç»„ä»¶çš„æ€è·¯å§~</p><h3 id="JSXå†™æ³•"><a href="#JSXå†™æ³•" class="headerlink" title="JSXå†™æ³•"></a>JSXå†™æ³•</h3><p><code>JSX</code> å°±æ˜¯Javascriptå’ŒXMLç»“åˆçš„ä¸€ç§æ ¼å¼ã€‚Reactå‘æ˜äº†JSXï¼Œåˆ©ç”¨HTMLè¯­æ³•æ¥åˆ›å»ºè™šæ‹ŸDOMã€‚å½“é‡åˆ° <code>&lt;</code> ï¼ŒJSXå°±å½“HTMLè§£æï¼Œé‡åˆ° <code>{</code> å°±å½“JavaScriptè§£æã€‚<br>æˆ‘ä¸ºä»€ä¹ˆç”¨jsxå‘¢ï¼Ÿä¸€æ–¹é¢æ˜¯ä¹‹å‰çš„ä¸€ç‰ˆtemplateå†™æ³•å†™çš„å®åœ¨æ˜¯çœ‹ç€å¾ˆâ€chouâ€ï¼Œå¦ä¸€æ–¹é¢æƒ³å­¦ä¹ jsxè¯­æ³•å’Œrenderå‡½æ•°<a href="https://cn.vuejs.org/v2/guide/render-function.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£çœ‹è¿™é‡Œ</a>ã€‚</p><h3 id="ä¸»æ€è·¯"><a href="#ä¸»æ€è·¯" class="headerlink" title="ä¸»æ€è·¯"></a>ä¸»æ€è·¯</h3><blockquote><p>ä»ç»“æ„ä¸Šæ¥çœ‹ï¼Œä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š<code>table</code> å’Œ <code>pagination</code> ï¼Œè€Œ <code>table</code> ä¸­åˆæœ‰ <code>column</code> ã€‚</p></blockquote><blockquote><p>å…¶æ¬¡å°±æ˜¯æ•°æ®çš„åŠ è½½å’Œè¿‡æ»¤ï¼Œé»˜è®¤ä¸»åŠ¨è°ƒç”¨æ•°æ®åŠ è½½ï¼Œç»Ÿä¸€å¤„ç†å¥½æ•°æ®ç»“æ„ï¼ˆ<code>table</code> æ‰€éœ€çš„ <code>list</code> ï¼Œåˆ†é¡µç»„ä»¶æ‰€éœ€çš„æ•°æ®ç­‰ï¼‰åï¼ŒæŒ‰éœ€è¿”å›ã€‚</p></blockquote><blockquote><p>æ‹–åŠ¨åŠŸèƒ½çš„åˆå§‹åŒ–å’Œå¤„ç†ã€‚</p></blockquote><blockquote><p>tableæ•°æ®çš„æ›´æ–°æœºåˆ¶ã€‚</p></blockquote><hr><p>æ‰€ä»¥ä¸»ç»“æ„æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123; <span class="keyword">this</span>.renderTable() &#125;</span><br><span class="line">      &#123; <span class="keyword">this</span>.renderPage() &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><p>å› ä¸ºåˆ†é¡µç»„ä»¶æ ¹æ®å¤–éƒ¨propså±æ€§å†³å®šä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨ï¼Œå¹¶ä¸”æœ‰ä¸€äº›è‡ªå®šä¹‰æ ·å¼ï¼Œæ‰€ä»¥æ”¹æˆè¿™æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123; <span class="keyword">this</span>.renderTable() &#125;</span><br><span class="line">      &lt;div style=&#123;<span class="keyword">this</span>.pageClass&#125;&gt;&#123; <span class="keyword">this</span>.showPagination ? <span class="keyword">this</span>.renderPage() : <span class="string">''</span> &#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="renderTable"><a href="#renderTable" class="headerlink" title="renderTable"></a>renderTable</h3><p>ä¸‹é¢çœ‹ä¸€ä¸‹ <code>renderTable</code> ä¸­æ˜¯æ€ä¹ˆå†™çš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * renderTable</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">renderTable () &#123;</span><br><span class="line">  <span class="keyword">const</span> props = &#123;</span><br><span class="line">    border: <span class="literal">true</span>, <span class="comment">// tableçš„è¾¹æ¡†</span></span><br><span class="line">    size: <span class="keyword">this</span>.tableSize, <span class="comment">// tableçš„å¤§å°</span></span><br><span class="line">    data: <span class="keyword">this</span>.dataList,  <span class="comment">// tableéœ€è¦çš„æ•°æ®</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;el-table ref=<span class="string">"multipleTable"</span></span><br><span class="line">      &#123;...&#123; props &#125;&#125;  <span class="comment">// å±æ€§ç»‘å®š</span></span><br><span class="line">      v-loading=&#123;<span class="keyword">this</span>.tableLoading&#125; <span class="comment">// tableçš„loading</span></span><br><span class="line">      on-selection-change=&#123;<span class="keyword">this</span>.changeFun&#125;  <span class="comment">// é€‰ä¸­æŸè¡Œçš„å›è°ƒ</span></span><br><span class="line">      on-select-all=&#123;<span class="keyword">this</span>.selectAll&#125;&gt; <span class="comment">// é€‰ä¸­æ‰€æœ‰è¡Œçš„å›è°ƒ</span></span><br><span class="line">      &#123;<span class="keyword">this</span>.columns.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="keyword">this</span>.renderTableColumn(item))&#125; <span class="comment">// éå†æ¯ä¸€åˆ—</span></span><br><span class="line">    &lt;<span class="regexp">/el-table&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;,</span></span><br></pre></td></tr></table></figure></p><blockquote><p><strong>renderTableä¸»è¦æ€è·¯å°±æ˜¯</strong>ï¼šå…ˆé…å¥½ table çš„å±æ€§ <code>props</code> ï¼Œreturn é‡Œè¿”å› table çš„ç»“æ„ï¼Œç»“æ„é‡Œ <code>ç»‘å®šå±æ€§å’Œæ–¹æ³•</code> ã€‚é‡Œé¢çš„æ¯ä¸€åˆ—ç”¨ <code>mpa</code> å‡½æ•°éå†ï¼Œå†ç”¨ <code>renderTableColumn</code> æ¸²æŸ“ã€‚</p></blockquote><h3 id="renderTableColumn"><a href="#renderTableColumn" class="headerlink" title="renderTableColumn"></a>renderTableColumn</h3><p>æ¸²æŸ“åˆ—çš„renderå‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * renderColumn</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">renderTableColumn (item) &#123;</span><br><span class="line">  <span class="comment">// TableColumné…ç½®çš„å±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> props = &#123;</span><br><span class="line">    prop: item.desc,</span><br><span class="line">    label: item.name,</span><br><span class="line">    align: <span class="string">'center'</span>,</span><br><span class="line">    key: item.desc,</span><br><span class="line">    width: item.fixedWidth == <span class="literal">undefined</span> ? <span class="string">'auto'</span> : item.fixedWidth,</span><br><span class="line">    minWidth: item.width == <span class="literal">undefined</span> ? <span class="string">'auto'</span> : item.width,</span><br><span class="line">    fixed: item.fixed,</span><br><span class="line">    showOverflowTooltip: item.tooltip ? <span class="literal">true</span> : <span class="literal">false</span>,</span><br><span class="line">    sortable: item.sortable ? <span class="string">'custom'</span> : <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// è¿™é‡Œéœ€è¦åˆ¤æ–­å½“å‰åˆ—(item.type)çš„å±æ€§ï¼Œå¦‚æœæœ‰type(é€šå¸¸typeç”¨äºå¸¦selecté€‰é¡¹çš„åˆ—)å°±å±•ç¤ºå¸¦typeçš„åˆ—ã€‚å¦‚æœæ²¡æœ‰å°±å±•ç¤ºæ­£å¸¸åˆ—ã€‚</span></span><br><span class="line">    item.type</span><br><span class="line">      ? <span class="xml"><span class="tag">&lt;<span class="name">el-table-column</span> &#123;<span class="attr">...</span>&#123; <span class="attr">props</span> &#125;&#125; <span class="attr">type</span>=<span class="string">&#123;item.type&#125;</span> <span class="attr">selectable</span>=<span class="string">&#123;item.selectable&#125;/</span>&gt;</span> // å¸¦typeçš„åˆ—</span></span><br><span class="line">      : &lt;el-table-column &#123;...&#123; props &#125;&#125; &#123;...&#123;scopedSlots: &#123; // ä¸å¸¦typeçš„åˆ—</span><br><span class="line">        default: (scope) =&gt; &#123;</span><br><span class="line">          if (item.slot) &#123; </span><br><span class="line">            // å¦‚æœè®¾ç½®äº†slotï¼Œå°±è®¾ç½®ä¸€ä¸ªæ’æ§½å¹¶ä¸”è‡ªå¸¦è¿”å›å€¼</span><br><span class="line">            return this.$scopedSlots[item.desc](scope)</span><br><span class="line">          &#125; else if (item.pic) &#123;</span><br><span class="line">            // å¦‚æœè®¾ç½®äº†picï¼Œå°±è¿”å›ä¸€ä¸ªimgçš„ç»“æ„</span><br><span class="line">            return (&lt;img src=&#123;scope.row[item.desc]&#125; style=&#123;&#123;width: item.width - 24 + 'px', borderRadius: '5px'&#125;&#125;/&gt;)</span><br><span class="line">          &#125; else if (item.click) &#123;</span><br><span class="line">            // å¦‚æœå¸¦æœ‰ç‚¹å‡»äº‹ä»¶çš„ï¼Œå°±è®¾ç½®ç‚¹å‡»åçš„å›è°ƒï¼Œè¿˜å¸¦æœ‰filterçš„å›è°ƒã€‚</span><br><span class="line">            return (&lt;div style=&#123;item.style&#125; onClick=&#123;this.btnClickfunc.bind(item, scope.row, item.desc)&#125;&gt;&#123;item.filter ? item.filterFun(scope.row) : scope.row[item.desc]&#125;&lt;/div&gt;)</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            // é™¤å»ä»¥ä¸Šå‡ ç§ï¼Œæ™®é€šçš„éƒ½ç›´æ¥è¿”å›é€šç”¨çš„domç»“æ„ï¼Œå¸¦tooltipã€filterçš„å›è°ƒã€‚</span><br><span class="line">            return (&lt;div style=&#123;item.tooltip ? &#123;...this.tooltip, ...item.style&#125; : item.style&#125;&gt;&#123;item.filter ? item.filterFun(scope.row) : scope.row[item.desc]&#125;&lt;/div&gt;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;&#125;&#125;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><blockquote><p><strong>renderTableColumnä¸»è¦æ€è·¯å°±æ˜¯</strong>ï¼šé¦–å…ˆæ¯ä¸€åˆ—çš„ä¿¡æ¯è¿›æ¥å…ˆçœ‹æœ‰æ²¡æœ‰å¸¦typeï¼Œå¸¸è§çš„å°±æ˜¯å¸¦é€‰æ‹©æ¡†çš„ï¼ˆä¹Ÿå°±æ˜¯type=â€selectionâ€ï¼‰çš„ï¼Œå¦‚æœæ˜¯å°±å±•ç¤ºå¸¦typeçš„åˆ—ï¼Œå¦‚æœä¸æ˜¯å°±æ­£å¸¸åˆ—ã€‚</p></blockquote><blockquote><p>æ­£å¸¸åˆ—é‡Œé¢å¦‚æœæ˜¯å¸¦æœ‰æ’æ§½å±æ€§çš„ï¼Œå°±è®¾ç½®ä¸€ä¸ªæ’æ§½å¹¶ä¼ é€’å‚æ•°ï¼ˆæ’æ§½ç›¸å…³çŸ¥è¯†å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/3af8552449fb" target="_blank" rel="noopener">è¿™ç¯‡</a>ï¼‰ï¼›<br>å¦‚æœè®¾ç½®äº†æœ¬åˆ—éœ€è¦å±•ç¤ºpicï¼Œå°±è¿”å›ä¸€ä¸ªimgç»“æ„ï¼›<br>å¦‚æœè®¾ç½®å¸¦æœ‰ç‚¹å‡»äº‹ä»¶ï¼Œé‚£å°±è¿”å›ä¸€ä¸ªå¸¦æœ‰ç‚¹å‡»å›è°ƒçš„ç»“æ„ï¼›<br>å…¶ä½™çš„éƒ½è¿”å›æ­£å¸¸ç»“æ„ï¼Œå¹¶å¸¦æœ‰tooltipã€filterçš„å›è°ƒã€‚</p></blockquote><h3 id="renderPage"><a href="#renderPage" class="headerlink" title="renderPage"></a>renderPage</h3><p>æ¸²æŸ“åˆ†é¡µç»„ä»¶çš„renderå‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * renderPage</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">renderPage () &#123;</span><br><span class="line">  <span class="keyword">const</span> props = &#123;</span><br><span class="line">    background: <span class="literal">true</span>,</span><br><span class="line">    small: <span class="keyword">this</span>.pageSmall,</span><br><span class="line">    currentPage: <span class="keyword">this</span>.currentPage,</span><br><span class="line">    pageSizes: [<span class="number">15</span>, <span class="number">30</span>, <span class="number">60</span>, <span class="number">120</span>],</span><br><span class="line">    pageSize: <span class="keyword">this</span>.pageSize,</span><br><span class="line">    total: <span class="keyword">this</span>.total,</span><br><span class="line">    layout: <span class="string">'total, sizes, prev, pager, next, jumper'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;el-pagination &#123;...&#123; props &#125;&#125; on-current-change=&#123;<span class="keyword">this</span>.handleCurrentChange&#125; on-size-change=&#123;<span class="keyword">this</span>.handleSizeChange&#125; style=&#123;<span class="keyword">this</span>.pageStyle&#125;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><blockquote><p>åŒæ ·çš„æ€è·¯ï¼šè®¾ç½®propsï¼Œç»‘å®šå±æ€§å’Œæ–¹æ³•ã€‚</p></blockquote><h3 id="æ•°æ®åŠ è½½"><a href="#æ•°æ®åŠ è½½" class="headerlink" title="æ•°æ®åŠ è½½"></a>æ•°æ®åŠ è½½</h3><p>ç»“æ„å¤§æ¦‚æ­å¥½ä¹‹åè€ƒè™‘ä¸€ä¸‹æ•°æ®é—®é¢˜ï¼Œé»˜è®¤æ˜¯ä¸»åŠ¨åŠ è½½æ•°æ®çš„ï¼Œä½†ä¹Ÿæœ‰ä¸éœ€è¦ä¸€åŠ è½½ç»„ä»¶å°±è¯·æ±‚æ•°æ®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨mountedå‡½æ•°å†…ä»¥ <code>isInit</code> å±æ€§æŒ‰éœ€è¯·æ±‚ï¼Œä¸‹é¢æ˜¯ <code>loadData</code> å‡½æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ•°æ®åŠ è½½</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">loadData () &#123;</span><br><span class="line">  <span class="keyword">this</span>.tableLoading = <span class="literal">true</span>  <span class="comment">// tableçš„loading</span></span><br><span class="line">  <span class="keyword">const</span> param = <span class="keyword">this</span>.showPagination <span class="comment">// åˆ†é¡µä¿¡æ¯</span></span><br><span class="line">    ? &#123; <span class="attr">page</span>: <span class="keyword">this</span>.currentPage, <span class="attr">size</span>: <span class="keyword">this</span>.pageSize &#125;</span><br><span class="line">    : <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.data &amp;&amp; <span class="keyword">this</span>.data <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123; <span class="comment">// å¦‚æœæ•°æ®æ˜¯æ•°ç»„å°±ç›´æ¥èµ‹å€¼ç»™dataList</span></span><br><span class="line">    <span class="keyword">this</span>.tableLoading = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">this</span>.dataList = <span class="keyword">this</span>.data</span><br><span class="line">    <span class="comment">// è°ƒç”¨åˆå§‹åŒ–æ‹–åŠ¨æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">this</span>.dragInit()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="comment">// å¦‚æœdataæ˜¯ä¸€ä¸ªè¿”å›å€¼æ˜¯promiseçš„å‡½æ•°ï¼Œå°±è°ƒç”¨å¹¶thenã€‚</span></span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">this</span>.data(param)</span><br><span class="line">    <span class="keyword">if</span> ((<span class="keyword">typeof</span> result === <span class="string">'object'</span> || <span class="keyword">typeof</span> result === <span class="string">'function'</span>) &amp;&amp; <span class="keyword">typeof</span> result.then === <span class="string">'function'</span>) &#123;</span><br><span class="line">      result.then(<span class="function"><span class="params">rsp</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†æ•°æ®ï¼Œç»™tableç»„ä»¶ã€ç»™åˆ†é¡µç»„ä»¶</span></span><br><span class="line">        <span class="keyword">this</span>.currentPage = rsp.data.currentPage</span><br><span class="line">        <span class="keyword">this</span>.total = rsp.data.totalElement</span><br><span class="line">        <span class="keyword">this</span>.tableLoading = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">this</span>.dataList = rsp.data.list</span><br><span class="line">        <span class="comment">// å¦‚æœçˆ¶ç»„ä»¶éœ€è¦è¿”å›å€¼å°±å‘é€è¿‡å»</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.needData) &#123;</span><br><span class="line">          <span class="keyword">this</span>.$emit(<span class="string">'allBackData'</span>, rsp.data)</span><br><span class="line">          <span class="keyword">this</span>.$emit(<span class="string">'backData'</span>, rsp.data.list, <span class="keyword">this</span>.currentPage, <span class="keyword">this</span>.pageSize)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è°ƒç”¨åˆå§‹åŒ–æ‹–åŠ¨æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">this</span>.dragInit()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><blockquote><p>é‡‡ç”¨ç»„ä»¶å†…è°ƒç”¨è·å–æ•°æ®æ–¹æ³•æ˜¯å› ä¸ºï¼ŒåŸºæœ¬åœ¨å’Œåç«¯å°ä¼™ä¼´å®šä¹‰æ•°æ®ç»“æ„çš„æ—¶å€™å°±ç»Ÿä¸€äº† table å’Œ pagination çš„ç»“æ„ï¼Œæ‰€ä»¥åœ¨ç»„ä»¶å†…éƒ¨ç»Ÿä¸€è¿‡æ»¤æ•°æ®å¯ä»¥è®©è°ƒç”¨è€…ä»£ç æ›´ç®€æ´ï¼Œå¦‚æœè°ƒç”¨è€…éœ€è¦è¿”å›å€¼åˆ™å¯ä»¥è®¾ç½®å±æ€§ã€‚</p></blockquote><h3 id="æ‹–åŠ¨åŠŸèƒ½"><a href="#æ‹–åŠ¨åŠŸèƒ½" class="headerlink" title="æ‹–åŠ¨åŠŸèƒ½"></a>æ‹–åŠ¨åŠŸèƒ½</h3><p>æ‹–åŠ¨è¦å¼•å…¥ <code>import Sortable from &#39;sortablejs&#39;</code> ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨æ—¶å¦‚æœè®¾ç½®äº† <code>drag</code> é‚£ä¹ˆç»„ä»¶å†…å°†åˆå§‹åŒ–æ‹–åŠ¨åŠŸèƒ½ã€‚çœ‹ä¸€ä¸‹åˆå§‹åŒ–æ‹–åŠ¨çš„æ–¹æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è®¾ç½®æ‹–åŠ¨</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">setSort () &#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="keyword">this</span>.$refs.multipleTable.$el.querySelectorAll(<span class="string">'.el-table__body-wrapper &gt; table &gt; tbody'</span>)[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.drag &amp;&amp; !<span class="keyword">this</span>.sortable) &#123;  <span class="comment">// å¦‚æœæ²¡æœ‰åˆ›å»ºsortableåˆ™åˆ›å»º</span></span><br><span class="line">    <span class="keyword">this</span>.sortable = Sortable.create(el, &#123;</span><br><span class="line">      ghostClass: <span class="string">'sortable-ghost'</span>, <span class="comment">// Class name for the drop placeholder,</span></span><br><span class="line">      setData (dataTransfer) &#123;</span><br><span class="line">        dataTransfer.setData(<span class="string">'Text'</span>, <span class="string">''</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      onEnd: <span class="function"><span class="params">evt</span> =&gt;</span> &#123; <span class="comment">// æ‹–åŠ¨å</span></span><br><span class="line">        <span class="keyword">const</span> tempIndex = <span class="keyword">this</span>.newList.splice(evt.oldIndex, <span class="number">1</span>)[<span class="number">0</span>] <span class="comment">// è·å–å½“å‰æ‹–åŠ¨é€‰é¡¹çš„id</span></span><br><span class="line">        <span class="keyword">this</span>.newList.splice(evt.newIndex, <span class="number">0</span>, tempIndex) <span class="comment">// åœ¨æ–°åˆ—è¡¨é‡Œçš„æ–°ä½ç½®æ’å…¥æ‹–åŠ¨é€‰é¡¹çš„id</span></span><br><span class="line">        <span class="keyword">this</span>.$emit(<span class="string">'newSort'</span>, <span class="keyword">this</span>.newList)  <span class="comment">// å‘é€ç»™çˆ¶ç»„ä»¶æ–°åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹–åŠ¨åéœ€åŒæ­¥tableå†…dataæ•°æ®</span></span><br><span class="line">        <span class="keyword">this</span>.dataList.splice(evt.newIndex, <span class="number">0</span>, <span class="keyword">this</span>.dataList.splice(evt.oldIndex, <span class="number">1</span>)[<span class="number">0</span>]) <span class="comment">// åœ¨tableListçš„æ–°ä½ç½®æ’å…¥æ‹–åŠ¨é€‰é¡¹çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">let</span> newArray = <span class="keyword">this</span>.dataList.slice(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">this</span>.dataList = []</span><br><span class="line">        <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.dataList = newArray  <span class="comment">// é‡æ–°èµ‹å€¼ç»™dataList</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="keyword">this</span>.drag &amp;&amp; <span class="keyword">this</span>.sortable) &#123; <span class="comment">// å¦‚æœä¸éœ€è¦æ‹–åŠ¨ ä½†æ˜¯åˆ›å»ºè¿‡sortable é‚£å°±é”€æ¯</span></span><br><span class="line">    <span class="keyword">this</span>.sortable.destroy()</span><br><span class="line">    <span class="keyword">this</span>.sortable = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>æ‹–åŠ¨åé¦–å…ˆè·å–åˆ°å½“å‰æ‹–åŠ¨é¡¹çš„idï¼Œæ”¾åˆ°åˆ—è¡¨çš„æ–°ä½ç½®ä¸Šï¼Œå‘é€ç»™çˆ¶ç»„ä»¶ã€‚<br>ä¹‹åtableçš„æ•°æ®ä¹Ÿéœ€è¦åŒæ­¥é¡ºåºï¼ŒæŠŠå½“å‰æ‹–åŠ¨é¡¹çš„æ•°æ®æ”¾åˆ°æ–°çš„ä½ç½®ä¸Šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œç­‰åˆ°domç»“æ„æ›´æ–°å®Œæˆä¹‹åï¼Œé‡æ–°èµ‹å€¼ç»™dataListï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çœ‹åˆ°åˆ—è¡¨çš„é¡ºåºå’Œå®é™…çš„é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="æ•°æ®æ›´æ–°"><a href="#æ•°æ®æ›´æ–°" class="headerlink" title="æ•°æ®æ›´æ–°"></a>æ•°æ®æ›´æ–°</h3><p>æœ‰ä¸€äº›ä¸šåŠ¡åœºæ™¯éœ€è¦æ›´æ–°tableçš„æ•°æ®ï¼Œæ‰€ä»¥ç»„ä»¶é‡Œå†™äº†ä¸€ä¸ª <code>refresh</code> çš„æ–¹æ³•ï¼Œæ–¹ä¾¿çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è¡¨æ ¼é‡æ–°åŠ è½½æ–¹æ³•</span></span><br><span class="line"><span class="comment">  * å¦‚æœå‚æ•°ä¸º true, åˆ™å¼ºåˆ¶åˆ·æ–°åˆ°ç¬¬ä¸€é¡µ</span></span><br><span class="line"><span class="comment">  * @param Boolean bool</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">refresh (bool = <span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (bool) &#123;</span><br><span class="line">    <span class="keyword">this</span>.currentPage = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.loadData()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ•´ä½“æ€è·¯å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œå…¶ä¸­çš„ä¸€äº›é€»è¾‘ä¹Ÿæ˜¯æ ¹æ®åæ¥ä¸šåŠ¡éœ€æ±‚åŠ ä¸Šçš„ï¼Œè¿˜æœ‰ä¸€äº›åˆ†é¡µã€æ¡†é€‰ç­‰ç›¸å…³æ–¹æ³•è¿™é‡Œæ²¡è¿‡å¤šè§£é‡Šï¼Œå®Œæ•´ä»£ç <a href="https://github.com/Yu-Lxy/element-admin/blob/master/src/components/table/index.js" target="_blank" rel="noopener">æˆ³è¿™é‡Œ</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Start&quot;&gt;&lt;a href=&quot;#Start&quot; class=&quot;headerlink&quot; title=&quot;Start&quot;&gt;&lt;/a&gt;Start&lt;/h2&gt;&lt;p&gt;é¡¹ç›®ä¸­ä½¿ç”¨è¡¨æ ¼ç°å¸¸çš„é¢‘ç¹ğŸ‘¿ï¼Œæ‰€ä»¥ä¸€ä¸ªç®€æ´çš„è¡¨æ ¼ç»„ä»¶ï¼Œæ—¢èƒ½è®©ä»£ç å˜å¾—ä¼˜é›…è¿˜å¯ä»¥çœå»å¾ˆå¤šé‡å¤çš„æ“ä½œã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="vue" scheme="http://yoursite.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>åå°ç®¡ç†ç³»ç»Ÿelement-adminâ€”â€”ç™»å½•æƒé™ç¯‡</title>
    <link href="http://yoursite.com/2020/09/08/element-admin/"/>
    <id>http://yoursite.com/2020/09/08/element-admin/</id>
    <published>2020-09-08T06:47:37.000Z</published>
    <updated>2020-11-09T03:17:46.740Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>è®°å½•å†™åå°ç®¡ç†ç³»ç»Ÿæ—¶çš„ä¸€äº›æƒ³æ³•å’Œç»„ä»¶çš„äºŒæ¬¡å°è£…ï¼Œé¡¹ç›®åˆæœŸå‚è€ƒçš„æ˜¯<a href="https://github.com/PanJiaChen" target="_blank" rel="noopener">èŠ±è£¤è¡©</a>å¤§ç¥çš„<a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener">vue-element-admin</a>ï¼ŒåæœŸæ ¹æ®ä¸šåŠ¡è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ã€‚</p><blockquote><p><a href="https://github.com/Yu-Lxy/element-admin" target="_blank" rel="noopener">é¡¹ç›®Githubåœ°å€</a></p></blockquote><a id="more"></a><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><p>ç™»å½•æµç¨‹çš„æ€è·¯æˆ‘ä»¬å…ˆå±¡æ¸…æ¥šï¼š</p><ul><li><p>ç”¨æˆ·åœ¨ç™»å½•é¡µè¾“å…¥è´¦å·å¯†ç ï¼Œå°†è´¦å·å¯†ç å‘é€è¯·æ±‚ç»™åç«¯</p><ul><li><p>å°†è´¦å·å¯†ç å‘é€è¯·æ±‚ç»™åç«¯çš„æ–¹æ³•å†™åœ¨<code>vuex</code>é‡Œä¾¿äºå…¨å±€tokençš„å­˜å–ï¼Œè€Œå‰ç«¯ç™»å½•æ–¹æ³•é‡Œåªéœ€è¦å…³æ³¨ç™»å½•çš„ç»“æœï¼Œå¹¶æ ¹æ®ç»“æœè·³è½¬é¡µé¢æˆ–æç¤ºé”™è¯¯ï¼Œè¿™æ ·ä»£ç ç»“æ„ä¼šæ¸…æ™°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- action: --&gt;</span><br><span class="line"></span><br><span class="line">Login (&#123;commit&#125;, userInfo) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username, password &#125; = userInfo</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    login(&#123; <span class="attr">username</span>: username.trim(), <span class="attr">password</span>: password &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.event !== <span class="number">0</span>) &#123;</span><br><span class="line">          reject(res)</span><br><span class="line">        &#125;</span><br><span class="line">        Vue.ls.set(ACCESS_TOKEN, res.data.token, <span class="number">12</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)</span><br><span class="line">        commit(<span class="string">'SET_TOKEN'</span>, res.data.token)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch (<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(error)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!-- Loginé¡µé¢: --&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions([<span class="string">'Login'</span>]),</span><br><span class="line">  handleLogin () &#123;</span><br><span class="line">    <span class="keyword">this</span>.$refs.loginForm.validate(<span class="function"><span class="params">valid</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">        <span class="keyword">this</span>.loading = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">this</span>.Login(<span class="keyword">this</span>.loginForm)</span><br><span class="line">          .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="keyword">this</span>.redirect || <span class="string">'/'</span> &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">            <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">          &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.$message.error(err.message);</span><br><span class="line">            <span class="keyword">this</span>.loading = <span class="literal">false</span></span><br><span class="line">          &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'error submit!!'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>åç«¯éªŒè¯ä¸€ä¸‹ç”¨æˆ·çš„è´¦å·å’Œå¯†ç çš„ä¿¡æ¯ï¼Œå¦‚æœç¬¦åˆå°±å‘ä¸€ä¸ªtokenè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸ç¬¦åˆå°±ä¸å‘é€tokenï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ã€‚</p></li><li>å¦‚æœç™»å½•æˆåŠŸï¼Œå®¢æˆ·ç«¯å°†<code>token</code>å­˜åœ¨<code>localStorage</code>é‡Œï¼Œä¹‹åè¦è¯·æ±‚å…¶ä»–èµ„æºçš„æ—¶å€™ï¼Œåœ¨è¯·æ±‚å¤´é‡Œå¸¦ä¸Šè¿™ä¸ªtokenã€‚<ul><li><code>service/http.js</code> ä¸­å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨ä¸­ï¼š<code>config.headers[&#39;token&#39;] = token</code>ã€‚</li></ul></li><li>åç«¯æ”¶åˆ°è¯·æ±‚ä¿¡æ¯ï¼Œå…ˆéªŒè¯ä¸‹tokenæ˜¯å¦æœ‰æ•ˆï¼Œæœ‰æ•ˆåˆ™ä¸‹å‘è¯·æ±‚çš„èµ„æºï¼Œæ— æ•ˆåˆ™è¿”å›éªŒè¯é”™è¯¯ã€‚</li></ul><h3 id="è·å–ç”¨æˆ·ä¿¡æ¯"><a href="#è·å–ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="è·å–ç”¨æˆ·ä¿¡æ¯"></a>è·å–ç”¨æˆ·ä¿¡æ¯</h3><p>ç™»å½•æˆåŠŸä¹‹åï¼Œåœ¨å…¨å±€è·¯ç”±é’©å­<code>router.beforeEach</code>ä¸­æ‹¦æˆªè·¯ç”±ï¼Œåˆ¤æ–­å¦‚æœæœ‰tokenï¼Œå°±å»è·å–ç”¨æˆ·ä¿¡æ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- router.beforeEach --&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Vue.ls.get(ACCESS_TOKEN)) &#123;</span><br><span class="line">  store.dispatch(<span class="string">'GetInfo'</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">infoRes</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> roles = res.data.role;</span><br><span class="line">    next()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><p>æƒé™æ§åˆ¶æ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡è¦æ±‚æ§åˆ¶åˆ°æŒ‰é’®çº§åˆ«ã€‚</p><blockquote><p>é¡µé¢çº§æƒé™çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡è·å–å½“å‰ç”¨æˆ·çš„æƒé™å»å¯¹æ¯”è·¯ç”±è¡¨ï¼Œç”Ÿæˆå½“å‰ç”¨æˆ·å…·æœ‰æƒé™å¯è®¿é—®çš„è·¯ç”±è¡¨ï¼Œé€šè¿‡ <code>router.addRouters</code> æŒ‚è½½åˆ° <code>router</code> ä¸Šã€‚</p></blockquote><p><strong>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><ol><li>åˆ¤æ–­æ˜¯å¦æœ‰<code>token</code>ï¼Œå¦‚æœæ²¡æœ‰å°±å»ç™»å½•ï¼Œæœ‰å°±ç¬¬äºŒæ­¥ã€‚</li><li>è·å–ç”¨æˆ·ä¿¡æ¯ <code>store.dispatch(&#39;GetInfo&#39;)</code>ã€‚</li><li>è·å–ä¿¡æ¯æˆåŠŸä¹‹åï¼Œè°ƒç”¨<code>store.dispatch(&#39;GenerateRoutes&#39;)</code>ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œä¼šè°ƒç”¨/router/index.jsé‡Œçš„ <code>generatorDynamicRouter</code> æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ ¹æ®ç”¨æˆ·ä¿¡æ¯æ„å»ºå¥½æƒé™çš„è·¯ç”±ç»“æ„ã€‚ï¼ˆgeneratorDynamicRouteræ–¹æ³•é‡Œå°†åå°è¿”å›çš„ä¸€ä¸ªå¹³çº§çš„menuä¿¡æ¯ï¼Œé€šè¿‡é€’å½’çš„æ–¹å¼ç”Ÿæˆå±‚çº§ç»“æ„ï¼Œå†é€’å½’ç”Ÿæˆå±‚çº§è·¯ç”±ï¼‰</li><li>å°†æ„å»ºçš„è·¯ç”±ç»“æ„ä¿¡æ¯åˆ©ç”¨ <code>Vue-Router</code> æä¾›çš„åŠ¨æ€å¢åŠ è·¯ç”±æ–¹æ³• <code>router.addRoutes</code> åŠ å…¥åˆ°è·¯ç”±è¡¨ä¸­ã€‚</li><li>åŠ å…¥è·¯ç”±è¡¨åå°†é¡µé¢è·³è½¬åˆ°ç”¨æˆ·åŸå§‹è¦è®¿é—®çš„é¡µé¢,å¦‚æœæ²¡æœ‰ <code>redirect</code> åˆ™è¿›å…¥é»˜è®¤é¡µé¢ã€‚</li></ol><blockquote><p>æˆ‘ä»¬æŠŠ <code>ç™»å½•</code> å’Œ <code>è·å–ç”¨æˆ·ä¿¡æ¯</code> åˆ†æˆäº†ä¸¤ä¸ªæ¥å£ï¼ŒåŸå› æ˜¯å½“ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼Œå¯ä»¥æ ¹æ®ç™»å½•æ—¶è·å–åˆ°çš„tokenå»è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œé¿å…äº†åˆ·æ–°è¿˜è¦è°ƒç”¨ç™»å½•æ¥å£ã€‚</p></blockquote><p>æ•´ä½“æµç¨‹å¯ä»¥çœ‹è¿™ä¸ªå›¾ï¼š<br><img src="/2020/09/08/element-admin/permission.png" alt="promission"></p><h3 id="å‰ç«¯æ§åˆ¶æƒé™"><a href="#å‰ç«¯æ§åˆ¶æƒé™" class="headerlink" title="å‰ç«¯æ§åˆ¶æƒé™"></a>å‰ç«¯æ§åˆ¶æƒé™</h3><p>æ—§ç‰ˆæœ¬åå°çš„è·¯ç”±è¡¨æ˜¯åç«¯åŒå­¦æ ¹æ®æƒé™ç”Ÿæˆçš„ï¼Œè¿™ä½¿å¾—å‰ç«¯å°ä¼™ä¼´æ¯å¼€å‘ä¸€ä¸ªé¡µé¢å°±éœ€è¦è®©åç«¯åŒå­¦é…ä¸€ä¸‹è·¯ç”±å’Œæƒé™ï¼Œå…‰å¬ç€å°±å¼€å§‹çš±çœ‰äº†ğŸ¤¦â€â™€ï¸ã€‚</p><p>äºæ˜¯æˆ‘ä»¬é‡‡ç”¨äº†åœ¨å‰ç«¯é¡µé¢é…ç½®è·¯ç”±å’Œæƒé™ï¼Œä¹‹åå°†è¿™ä»½è·¯ç”±è¡¨å­˜åˆ°åç«¯ã€‚</p><p>æƒé™/èœå•ï¼š<br><img src="/2020/09/08/element-admin/permission1.png" alt></p><p>æƒé™/è§’è‰²ï¼š<br><img src="/2020/09/08/element-admin/permission2.png" alt></p><blockquote><p><strong>ä¸€è§’è‰²å¯¹åº”å¤šæƒé™ï¼Œä¸€ç”¨æˆ·å¯¹åº”å¤šè§’è‰²</strong></p></blockquote><blockquote><p>å½“ç”¨æˆ·ç™»å½•åå¾—åˆ° <code>roles</code>ï¼Œå‰ç«¯æ ¹æ® roles å»å‘åç«¯è¯·æ±‚å¯è®¿é—®çš„è·¯ç”±è¡¨ï¼Œä»è€ŒåŠ¨æ€ç”Ÿæˆå¯è®¿é—®é¡µé¢ï¼Œä¹‹åå°±æ˜¯ <code>router.addRoutes</code> åŠ¨æ€æŒ‚è½½åˆ° <code>router</code> ä¸Šï¼Œå’ŒåŸæ¥æ˜¯ç›¸åŒçš„ã€‚</p></blockquote><h3 id="æŒ‰é’®çº§æƒé™"><a href="#æŒ‰é’®çº§æƒé™" class="headerlink" title="æŒ‰é’®çº§æƒé™"></a>æŒ‰é’®çº§æƒé™</h3><p>åœ¨é…ç½®èœå•æƒé™é¡µé¢ä¹Ÿå¯ä»¥æ·»åŠ é…ç½®æŒ‰é’®çš„æƒé™ï¼Œç™»å½•ä¹‹åçš„ <code>store.dispatch(&#39;GetInfo&#39;)</code> ä¸­èƒ½æ‹¿åˆ°å¯¹åº”æƒé™çš„æŒ‰é’®ï¼Œå¹¶å­˜å‚¨åœ¨ <code>vuex</code> ä¸­ã€‚</p><p>åˆ¤æ–­æŒ‰é’®æ˜¯å¦å±•ç¤ºæ˜¯å†™äº†ä¸€ä¸ªå…¬ç”¨æ–¹æ³• <code>checkPermission</code> ï¼Œæ²¡æœ‰ç”¨æŒ‡ä»¤æ˜¯å› ä¸ºæ— æ³•é€‚ç”¨äºæ‰€æœ‰ç»„ä»¶ã€‚</p><p>å°†æå‰è®¾ç½®å¥½çš„ <code>å”¯ä¸€é”®</code> ä¼ å…¥æ–¹æ³•ï¼Œå°±å¯ä»¥ä»vuexé‡Œ <code>store.getters.buttons</code> æ‹¿åˆ°æ‰€æœ‰æŒ‰é’®æƒé™ï¼Œå¯¹æ¯”åè¿”å› <code>true æˆ– false</code>ï¼Œæ¥æ§åˆ¶æŒ‰é’®çš„å±•ç¤ºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥æ–¹æ³• --&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; checkPermission &#125; <span class="keyword">from</span> <span class="string">'@/utils/permissions'</span></span><br><span class="line"></span><br><span class="line">&lt;!-- dataä¸­å®šä¹‰å˜é‡ --&gt;</span><br><span class="line">addEnable: checkPermission(<span class="string">'system:role:add'</span>)</span><br><span class="line"></span><br><span class="line">&lt;!-- v-<span class="keyword">if</span>åˆ¤æ–­ --&gt;</span><br><span class="line">&lt;el-button v-<span class="keyword">if</span>=<span class="string">"addEnable"</span>&gt;æ·»åŠ è§’è‰²&lt;<span class="regexp">/el-button&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><blockquote><p><a href="https://github.com/Yu-Lxy/element-admin" target="_blank" rel="noopener">å®Œæ•´ä»£ç åœ°å€</a><br>é™„å›¾ï¼š<br><img src="/2020/09/08/element-admin/login.png" alt><br><img src="/2020/09/08/element-admin/home.png" alt></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Start&quot;&gt;&lt;a href=&quot;#Start&quot; class=&quot;headerlink&quot; title=&quot;Start&quot;&gt;&lt;/a&gt;Start&lt;/h2&gt;&lt;p&gt;è®°å½•å†™åå°ç®¡ç†ç³»ç»Ÿæ—¶çš„ä¸€äº›æƒ³æ³•å’Œç»„ä»¶çš„äºŒæ¬¡å°è£…ï¼Œé¡¹ç›®åˆæœŸå‚è€ƒçš„æ˜¯&lt;a href=&quot;https://github.com/PanJiaChen&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;èŠ±è£¤è¡©&lt;/a&gt;å¤§ç¥çš„&lt;a href=&quot;https://github.com/PanJiaChen/vue-element-admin&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;vue-element-admin&lt;/a&gt;ï¼ŒåæœŸæ ¹æ®ä¸šåŠ¡è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Yu-Lxy/element-admin&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é¡¹ç›®Githubåœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="vue" scheme="http://yoursite.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>ç¬¬ä¸€æ¬¡ä½¿ç”¨mongoDBçš„è®°å½•</title>
    <link href="http://yoursite.com/2020/09/04/mongo/"/>
    <id>http://yoursite.com/2020/09/04/mongo/</id>
    <published>2020-09-04T07:30:15.000Z</published>
    <updated>2020-09-04T10:00:05.625Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä¸€ä¸ª <code>vue+express+mongodb</code> çš„å°demoï¼Œå®ç°äº†åˆ—è¡¨çš„å¢åˆ æŸ¥ï¼Œä»¥åŠç®€å•çš„åˆ†é¡µåŠŸèƒ½ã€‚<br><a href="https://github.com/Yu-Lxy/Daily_practice/tree/master/mongo" target="_blank" rel="noopener">Githubé¡¹ç›®åœ°å€</a></p><a id="more"></a><h2 id="mongoå‘½ä»¤è¡Œæ“ä½œ"><a href="#mongoå‘½ä»¤è¡Œæ“ä½œ" class="headerlink" title="mongoå‘½ä»¤è¡Œæ“ä½œ"></a>mongoå‘½ä»¤è¡Œæ“ä½œ</h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿›å…¥mongoå‘½ä»¤è¡Œ</span></span><br><span class="line"><span class="selector-tag">mongo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line"><span class="selector-tag">show</span> <span class="selector-tag">dbs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ‡æ¢/åˆ›å»ºæ•°æ®åº“,å½“åˆ›å»ºä¸€ä¸ªé›†åˆ(table)çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºå½“å‰æ•°æ®åº“</span></span><br><span class="line"><span class="selector-tag">use</span> <span class="selector-tag">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢</span></span><br><span class="line"><span class="selector-tag">db</span>.è¡¨å<span class="selector-class">.find</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"><span class="selector-tag">db</span>.è¡¨å<span class="selector-class">.find</span>(&#123;<span class="attribute">price</span>: <span class="number">5</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥(insertOne/insertMany/save)</span></span><br><span class="line"><span class="selector-tag">db</span>.è¡¨å<span class="selector-class">.insertOne</span>(&#123;<span class="attribute">name</span>: <span class="string">'è‹¹æœ'</span>, <span class="attribute">price</span>: <span class="number">5</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°</span></span><br><span class="line"><span class="selector-tag">db</span>.è¡¨å<span class="selector-class">.update</span>(&#123; <span class="attribute">name</span>: <span class="string">'è‹¹æœ'</span> &#125;, &#123; $<span class="attribute">set</span>: &#123; <span class="attribute">price</span>: <span class="number">6</span> &#125; &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤(deleteOne/deleteMany/remove)</span></span><br><span class="line"><span class="selector-tag">db</span>.è¡¨å<span class="selector-class">.updateOne</span>(&#123; <span class="attribute">name</span>: <span class="string">'è‹¹æœ'</span> &#125;)</span><br></pre></td></tr></table></figure><h2 id="mongoDB"><a href="#mongoDB" class="headerlink" title="mongoDB"></a>mongoDB</h2><blockquote><p>mongoDBçš„åŸºæœ¬æ“ä½œ</p></blockquote><ol><li><p>è¿æ¥mongoDB</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">const</span> MongoClient = <span class="built_in">require</span>(<span class="string">'mongodb'</span>).MongoClient</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥URL</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">url</span> = <span class="string">'mongodb://localhost:27017'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®åº“å</span></span><br><span class="line"><span class="keyword">const</span> dbName = <span class="string">'test'</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 0.åˆ›å»ºå®¢æˆ·ç«¯</span></span><br><span class="line">  <span class="keyword">const</span> client = <span class="keyword">new</span> MongoClient(<span class="built_in">url</span>, &#123; <span class="attribute">useNewUrlParser</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  <span class="title">try</span> &#123;</span><br><span class="line">    <span class="comment">// 1.è¿æ¥æ•°æ®åº“(å¼‚æ­¥) </span></span><br><span class="line">    <span class="keyword">await</span> client.connect() </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¿æ¥æˆåŠŸ'</span>)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error)</span><br><span class="line">  &#125;</span><br><span class="line">  client.close()</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></li><li><p>è·å–æ•°æ®åº“</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">db</span> = client.<span class="keyword">db</span>(dbName)</span><br></pre></td></tr></table></figure></li><li><p>è·å–è¡¨</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> col = <span class="keyword">db</span>.collection(colName)</span><br></pre></td></tr></table></figure></li></ol><p>åŸºæœ¬æ“ä½œäº†è§£åè¿è¡Œä¸€ä¸‹<a href="https://github.com/Yu-Lxy/Daily_practice/tree/master/mongo" target="_blank" rel="noopener">é¡¹ç›®</a>é‡Œçš„ä»£ç ~ ğŸ‘‡</p><h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>é¦–å…ˆå®‰è£…ä»¥ä¸‹<br><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">i</span> express path <span class="keyword">events</span> mongodb nodemon</span><br></pre></td></tr></table></figure></p><p>conf.jsé‡Œè®¾ç½®è‡ªå·±çš„mongodbé…ç½®</p><p>æ•°æ®åº“æ²¡æ•°æ®çš„è¯å…ˆæ‰§è¡Œä»¥ä¸‹æ·»åŠ æ•°æ®ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> models</span><br><span class="line">nodemon testData.js</span><br></pre></td></tr></table></figure></p><p>æ·»åŠ å¥½ä¹‹åctrl+c, å†æ‰§è¡Œä»¥ä¸‹<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">cd</span></span> ..</span><br><span class="line">nodemon index.js</span><br></pre></td></tr></table></figure></p><p>æ‰“å¼€localhost:3000èƒ½çœ‹åˆ°å¦‚ä¸‹æ ·å¼</p><p><img src="https://i.loli.net/2020/08/27/ALNjeIKPOY9QTHF.png" alt="image.png"></p><h2 id="EventEmitter"><a href="#EventEmitter" class="headerlink" title="EventEmitter"></a>EventEmitter</h2><p><a href="https://github.com/Yu-Lxy/Daily_practice/tree/master/mongo" target="_blank" rel="noopener">é¡¹ç›®</a>ä¸­æœ‰ä¸€ä¸ªtestData.jsï¼Œæ‰§è¡Œåå¯ä»¥æ’å…¥æµ‹è¯•æ•°æ®ã€‚å…¶ä¸­æœ‰ä¸€ä¸ª <code>mongodb.once()</code> æ–¹æ³•ï¼Œå®é™…ä¸Šåœ¨db.jsé‡Œçš„ <code>MongDBç±»</code> ä¸­æ˜¯æ‰§è¡Œäº† <code>EventEmitterçš„once</code> æ–¹æ³•ã€‚eventsæ¨¡å—åªæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š <code>events.EventEmitter</code>ï¼Œ å…¶æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ï¼Œå¯ä»¥é€šè¿‡require(â€˜eventsâ€™)æ¥è®¿é—®è¯¥æ¨¡å—ã€‚<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹å­</span></span><br><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter </span><br><span class="line"><span class="keyword">const</span> event = <span class="keyword">new</span> EventEmitter() </span><br><span class="line">event.on(<span class="string">'some_event'</span>, <span class="function"><span class="params">num</span> =&gt;</span>  &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'some_event äº‹ä»¶è§¦å‘:'</span> + num) </span><br><span class="line">&#125;) </span><br><span class="line"><span class="keyword">let</span> num = <span class="number">0</span></span><br><span class="line">setInterval(<span class="function"><span class="params">()</span> =&gt;</span>  &#123; </span><br><span class="line">  event.emit(<span class="string">'some_event'</span> , num ++ ) </span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure></p><p><code>event.once()</code> æ˜¯åªæ‰§è¡Œä¸€æ¬¡çš„ç›‘å¬ï¼Œæ‰€ä»¥æ‰§è¡Œ <code>nodemon testData.js</code> åï¼Œåªè§¦å‘ä¸€æ¬¡è¿åº“çš„æ“ä½œå¹¶æ‰§è¡Œå›è°ƒã€‚</p><h2 id="æ³¨æ„çš„ç‚¹"><a href="#æ³¨æ„çš„ç‚¹" class="headerlink" title="æ³¨æ„çš„ç‚¹"></a>æ³¨æ„çš„ç‚¹</h2><ul><li>åç«¯getè¯·æ±‚çš„å‚æ•°ä»<code>query</code>é‡Œæ‹¿, postè¯·æ±‚çš„å‚æ•°ä»<code>body</code>é‡Œæ‹¿ã€‚</li><li><code>const page = + req.query.page</code> +å·ä¸ºäº†è½¬Numberç±»å‹ã€‚</li><li><code>.skip(n).limit(m)</code> æ„ä¸ºè·³è¿‡nä¸ªå–mä¸ªã€‚</li><li>mongoDBæ’å…¥æ•°æ®æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ <code>_id</code> æ˜¯ <code>ObjectId</code> å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥å½“å‚æ•°ä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ—¶éœ€è¦å¼•å…¥ <code>mongodbçš„ObjectID</code>ï¼Œä¼ å‚æ—¶è°ƒç”¨ã€‚</li></ul><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>å‰ç«¯å°ç™½ç¬¬ä¸€æ¬¡ä½¿ç”¨mongoDBçš„è®°å½•ğŸ“ï¼Œç®€å•å°ä¾‹å­å®¹æ˜“å…¥é—¨å’Œç†è§£ï¼Œè½»å–·~ ğŸ˜†</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ª &lt;code&gt;vue+express+mongodb&lt;/code&gt; çš„å°demoï¼Œå®ç°äº†åˆ—è¡¨çš„å¢åˆ æŸ¥ï¼Œä»¥åŠç®€å•çš„åˆ†é¡µåŠŸèƒ½ã€‚&lt;br&gt;&lt;a href=&quot;https://github.com/Yu-Lxy/Daily_practice/tree/master/mongo&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Githubé¡¹ç›®åœ°å€&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="mongoDB" scheme="http://yoursite.com/categories/mongoDB/"/>
    
    
      <category term="mongoDB" scheme="http://yoursite.com/tags/mongoDB/"/>
    
  </entry>
  
  <entry>
    <title>vue+koa+mysqlå®ç°ä¸€ä¸ªç®€å•çš„todolist</title>
    <link href="http://yoursite.com/2020/08/25/koa/"/>
    <id>http://yoursite.com/2020/08/25/koa/</id>
    <published>2020-08-25T02:41:27.000Z</published>
    <updated>2020-09-04T07:31:36.320Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><p>æ„å»ºä¸€ä¸ªæ•°æ®é€šè¿‡ <code>koa</code> çš„apiè·å–ï¼Œé¡µé¢é€šè¿‡ <code>vue</code> æ¸²æŸ“çš„å‰åç«¯éƒ½æœ‰çš„å®Œæ•´demoã€‚åŒ…æ‹¬ä¸€ä¸ªç™»é™†é¡µé¢å’Œä¸€ä¸ªtodolisté¡µé¢çš„å¢åˆ æ”¹æŸ¥ï¼Œå…¶ä¸­ç”¨åˆ°äº†å‰ç«¯ <code>Vueæ¡†æ¶</code> ã€<code>koa</code> æä¾›æ¥å£ã€éªŒè¯ <code>token</code>ã€<code>sequelize</code> æ“ä½œ <code>mysql</code> ç­‰ï¼Œè¿™é‡Œè®°å½•ä¸€äº›å…³é”®ç‚¹ã€‚</p><a id="more"></a><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>è¿™é‡Œç”¨åˆ°çš„æ˜¯vue-cli2çš„webpackï¼Œé¡¹ç›®åˆ›å»ºå¥½ä¹‹åæ‰§è¡Œ<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn </span><br><span class="line">yarn <span class="keyword">add </span>koa koa-router koa-logger koa-<span class="keyword">json </span>koa-<span class="keyword">bodyparser </span>nodemon vue-router element-ui axios koa-<span class="keyword">jwt </span><span class="keyword">bcrypt </span>kao-static</span><br></pre></td></tr></table></figure></p><blockquote><p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºserveræ–‡ä»¶å¤¹ï¼ŒåŠå­æ–‡ä»¶å¤¹</p><ul><li>configï¼ˆæ•°æ®åº“é…ç½®ï¼‰</li><li>controllersï¼ˆæ§åˆ¶å±‚ï¼Œæ ¹æ®é¡µé¢çš„è¯·æ±‚é€‰å–â€æ•°æ®å±‚â€ä¸­ç›¸åº”çš„æ•°æ®ï¼Œç„¶åè¿”å›ç»™é¡µé¢ï¼‰</li><li>modelsï¼ˆæ•°æ®å±‚ï¼Œå°†æ•°æ®åº“å’Œè¡¨ç»“æ„è¿èµ·æ¥ï¼‰</li><li>routesï¼ˆè·¯ç”±ï¼‰</li><li>schemaï¼ˆè¡¨ç»“æ„ï¼‰</li></ul></blockquote><blockquote><p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºapp.jsä½œä¸ºkoaçš„å¯åŠ¨æ–‡ä»¶ï¼ˆå…·ä½“ä»£ç è§é¡¹ç›®ï¼‰</p></blockquote><p>åç«¯ï¼šåœ¨æ§åˆ¶å°è¾“å…¥ <code>nodemon app.js</code>, è¾“å‡º<code>Koa is listening in 8889</code>è¯´æ˜å¯åŠ¨æˆåŠŸï¼Œå¹¶åœ¨8889ç«¯å£ç›‘å¬ã€‚<br>å‰ç«¯ï¼šåœ¨æ§åˆ¶å°è¾“å…¥ <code>npm run dev</code> ååœ¨ <code>localhost:8080</code> å¯ä»¥å±•ç¤ºå‰ç«¯é¡µé¢ã€‚</p><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><p>å¯ä»¥å»å®˜ç½‘ä¸‹è½½<code>mysql</code>ï¼Œæˆ‘ç”¨åˆ°çš„å¯è§†åŒ–å·¥å…·æ˜¯<code>MySQLWorkbench</code></p><p>å®‰è£…å¥½åå¼€å§‹åˆ›å»ºæ•°æ®è¡¨ã€‚ç”¨æˆ·è¡¨ï¼šç”¨äºç™»å½•éªŒè¯ã€‚å¾…åŠäº‹é¡¹è¡¨ç”¨äºå±•ç¤ºå¾…åŠäº‹é¡¹ã€‚</p><p>userè¡¨ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th></tr></thead><tbody><tr><td>id(ç”¨æˆ¶id)</td><td>int(è‡ªå¢)</td></tr><tr><td>user_name(ç”¨æˆ·å)</td><td>CHAR(50)</td></tr><tr><td>password(å¯†ç )</td><td>CHAR(128)</td></tr></tbody></table><p>â€”</p><p>listè¡¨ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th></tr></thead><tbody><tr><td>id(listçš„id)</td><td>int(è‡ªå¢)</td></tr><tr><td>user_id(ç”¨æˆ·id)</td><td>int(11)</td></tr><tr><td>content(ä»£åŠå†…å®¹)</td><td>CHAR(255)</td></tr><tr><td>status(ä»£åŠçŠ¶æ€)</td><td>tinyint(1)</td></tr></tbody></table><p>â€”</p><h2 id="Sequelize"><a href="#Sequelize" class="headerlink" title="Sequelize"></a>Sequelize</h2><p><code>sequelize</code> ç†è§£ä¸ºç”¨ç®€å•çš„æ–¹å¼æ“ä½œæ•°æ®åº“çš„ORMæ¡†æ¶ã€‚</p><p><code>server/schema</code> ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œuser.jså’Œlist.jsï¼Œæ˜¯æ•°æ®åº“çš„ä¸¤å¼ è¡¨ç»“æ„ï¼Œå¯ä½¿ç”¨sequelize-autoç›´æ¥å¯¼å‡ºè¡¨ç»“æ„ã€‚</p><p>åœ¨<code>server/config</code>ä¸‹æ–°å»ºdb.js, ç”¨äºåˆå§‹åŒ–Sequelizeå’Œæ•°æ®åº“çš„è¿æ¥ï¼ˆå…·ä½“ä»£ç è§é¡¹ç›®ï¼‰</p><h2 id="JSON-WEB-TOKEN"><a href="#JSON-WEB-TOKEN" class="headerlink" title="JSON-WEB-TOKEN"></a>JSON-WEB-TOKEN</h2><p>è¿ç”¨äº†JSON-WEB-TOKENçš„ç™»å½•ç³»ç»Ÿåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p><blockquote><ol><li>ç”¨æˆ·åœ¨ç™»å½•é¡µè¾“å…¥è´¦å·å¯†ç ï¼Œå°†è´¦å·å¯†ç ï¼ˆåŠ å¯†åï¼‰å‘é€è¯·æ±‚ç»™åç«¯</li><li>åç«¯éªŒè¯ä¸€ä¸‹ç”¨æˆ·çš„è´¦å·å’Œå¯†ç çš„ä¿¡æ¯ï¼Œå¦‚æœç¬¦åˆå°±å‘ä¸€ä¸ªtokenè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸ç¬¦åˆå°±ä¸å‘é€tokenï¼Œè¿”å›éªŒè¯é”™è¯¯ä¿¡æ¯ã€‚</li><li>å¦‚æœç™»å½•æˆåŠŸï¼Œå®¢æˆ·ç«¯å°†tokenç”¨æŸç§æ–¹å¼å­˜ä¸‹æ¥ï¼Œä¹‹åè¦è¯·æ±‚å…¶ä»–èµ„æºçš„æ—¶å€™ï¼Œåœ¨è¯·æ±‚å¤´é‡Œå¸¦ä¸Šè¿™ä¸ªtokenã€‚</li><li>åç«¯æ”¶åˆ°è¯·æ±‚ä¿¡æ¯ï¼Œå…ˆéªŒè¯ä¸‹tokenæ˜¯å¦æœ‰æ•ˆï¼Œæœ‰æ•ˆåˆ™ä¸‹å‘è¯·æ±‚çš„èµ„æºï¼Œæ— æ•ˆåˆ™è¿”å›éªŒè¯é”™è¯¯ã€‚</li></ol></blockquote><p>é€šè¿‡è¿™ä¸ªtokençš„æ–¹å¼ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„è®¿é—®ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚ä¹Ÿå°±æ˜¯æœåŠ¡ç«¯ä¸çŸ¥é“ä½ è¿™ä¸ªç”¨æˆ·åˆ°åº•åœ¨ä¸åœ¨çº¿ï¼Œåªè¦ä½ å‘é€çš„è¯·æ±‚å¤´é‡Œçš„tokenæ˜¯æ­£ç¡®çš„æˆ‘å°±ç»™ä½ è¿”å›ä½ æƒ³è¦çš„èµ„æºã€‚è¿™æ ·èƒ½å¤Ÿä¸å ç”¨æœåŠ¡ç«¯çš„ç©ºé—´èµ„æºï¼Œè€Œä¸”å¦‚æœæ¶‰åŠåˆ°æœåŠ¡å™¨é›†ç¾¤ï¼Œå¦‚æœæœåŠ¡å™¨è¿›è¡Œç»´æŠ¤æˆ–è€…è¿ç§»æˆ–è€…éœ€è¦CDNèŠ‚ç‚¹çš„åˆ†é…çš„è¯ï¼Œ<code>æ— çŠ¶æ€</code>çš„è®¾è®¡æ˜¾ç„¶ç»´æŠ¤æˆæœ¬æ›´ä½ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç”¨æ³• --&gt;</span></span><br><span class="line"></span><br><span class="line">const secret = 'vue-koa-demo' // æŒ‡å®šå¯†é’¥ï¼Œè¿™æ˜¯ä¹‹åç”¨æ¥åˆ¤æ–­tokenåˆæ³•æ€§çš„æ ‡å¿—</span><br><span class="line"></span><br><span class="line">jwt.sign(userToken, secret) // ç­¾å‘token</span><br><span class="line"></span><br><span class="line">jwt.decode(token) // è§£ætoken</span><br></pre></td></tr></table></figure><h2 id="å¯†ç åŠ å¯†"><a href="#å¯†ç åŠ å¯†" class="headerlink" title="å¯†ç åŠ å¯†"></a>å¯†ç åŠ å¯†</h2><p>md5åŠ å¯†å®¹æ˜“è¢«ç ´è§£ï¼Œæ‰€ä»¥å‡†å¤‡é‡‡ç”¨<code>bcrypt</code>çš„åŠ å¯†æ–¹å¼ï¼Œå…¨éƒ¨èµ°åç«¯åŠ å¯†ã€‚<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">bcrypt.compareSync(data<span class="selector-class">.password</span>, userInfo.password)</span><br></pre></td></tr></table></figure></p><h2 id="Tokençš„å‘é€ä¸éªŒè¯"><a href="#Tokençš„å‘é€ä¸éªŒè¯" class="headerlink" title="Tokençš„å‘é€ä¸éªŒè¯"></a>Tokençš„å‘é€ä¸éªŒè¯</h2><p>åœ¨å…¨å±€å‘é€è¯·æ±‚<code>Header</code>ä¸ŠåŠ å…¥<code>Authorization</code>å±æ€§ï¼Œ å€¼æ˜¯<code>Bearer tokenå€¼</code><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue<span class="selector-class">.prototype</span>.<span class="variable">$http</span><span class="selector-class">.defaults</span><span class="selector-class">.headers</span><span class="selector-class">.common</span>[<span class="string">'Authorization'</span>] = <span class="string">'Bearer '</span> + token</span><br></pre></td></tr></table></figure></p><p>/api/* éƒ½éœ€è¦èµ°tokenéªŒè¯<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">koa</span><span class="selector-class">.use</span>(<span class="string">"/api"</span>,jwt(&#123;<span class="attribute">secret</span>: <span class="string">'vue-koa-demo'</span>&#125;),api.routes()) <span class="comment">// æ‰€æœ‰èµ°/api/æ‰“å¤´çš„è¯·æ±‚éƒ½éœ€è¦ç»è¿‡jwtä¸­é—´ä»¶çš„éªŒè¯ã€‚secretå¯†é’¥å¿…é¡»è·Ÿæˆ‘ä»¬å½“åˆç­¾å‘çš„secretä¸€è‡´</span></span><br></pre></td></tr></table></figure></p><h2 id="Koa-serveé™æ€èµ„æº"><a href="#Koa-serveé™æ€èµ„æº" class="headerlink" title="Koa serveé™æ€èµ„æº"></a>Koa serveé™æ€èµ„æº</h2><p>é¡¹ç›®<code>npm run dev</code>æ‰“åŒ…å<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> serve = <span class="keyword">require</span>(<span class="string">'koa-static'</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="keyword">use</span>(serve(path.join(__dirname, <span class="string">'dist'</span>))) <span class="comment">// å°†webpackæ‰“åŒ…å¥½çš„é¡¹ç›®ç›®å½•ä½œä¸ºKoaé™æ€æ–‡ä»¶æœåŠ¡çš„ç›®å½•</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸ç”¨å¯å‰ç«¯é¡¹ç›®ï¼Œlocalhost:8889å°±å¯ä»¥è®¿é—®æ‰“åŒ…å¥½çš„é™æ€èµ„æºé¡µé¢ã€‚</p><h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>è¿™æ˜¯ä¸€ä¸ªå‰åç«¯éƒ½æœ‰çš„å®Œæ•´å°demoï¼Œç»“æ„æ¸…æ™°ç®€å•çš„å°ä¸œè¥¿æ›´å®¹æ˜“ç†è§£å’Œå…¥é—¨ï¼Œå®Œæ•´é¡¹ç›®<a href="https://github.com/Yu-Lxy/Daily_practice/tree/master/koa" target="_blank" rel="noopener">Githubåœ°å€</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Start&quot;&gt;&lt;a href=&quot;#Start&quot; class=&quot;headerlink&quot; title=&quot;Start&quot;&gt;&lt;/a&gt;Start&lt;/h2&gt;&lt;p&gt;æ„å»ºä¸€ä¸ªæ•°æ®é€šè¿‡ &lt;code&gt;koa&lt;/code&gt; çš„apiè·å–ï¼Œé¡µé¢é€šè¿‡ &lt;code&gt;vue&lt;/code&gt; æ¸²æŸ“çš„å‰åç«¯éƒ½æœ‰çš„å®Œæ•´demoã€‚åŒ…æ‹¬ä¸€ä¸ªç™»é™†é¡µé¢å’Œä¸€ä¸ªtodolisté¡µé¢çš„å¢åˆ æ”¹æŸ¥ï¼Œå…¶ä¸­ç”¨åˆ°äº†å‰ç«¯ &lt;code&gt;Vueæ¡†æ¶&lt;/code&gt; ã€&lt;code&gt;koa&lt;/code&gt; æä¾›æ¥å£ã€éªŒè¯ &lt;code&gt;token&lt;/code&gt;ã€&lt;code&gt;sequelize&lt;/code&gt; æ“ä½œ &lt;code&gt;mysql&lt;/code&gt; ç­‰ï¼Œè¿™é‡Œè®°å½•ä¸€äº›å…³é”®ç‚¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="koa" scheme="http://yoursite.com/categories/koa/"/>
    
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
      <category term="koa" scheme="http://yoursite.com/tags/koa/"/>
    
  </entry>
  
  <entry>
    <title>try catchèƒ½æ•è·åˆ°å“ªäº›JSå¼‚å¸¸</title>
    <link href="http://yoursite.com/2020/08/04/tryCatch/"/>
    <id>http://yoursite.com/2020/08/04/tryCatch/</id>
    <published>2020-08-04T01:50:45.000Z</published>
    <updated>2020-09-04T02:00:54.226Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å†™ä»£ç æ—¶ç»å¸¸ä¼šç”¨åˆ° <code>try catch</code>ï¼Œé˜²æ­¢ä¸€äº›JSæŠ¥é”™ï¼Œå¯¼è‡´é¡µé¢æŒ‚æ‰ã€‚é‚£ä¹ˆåˆ°åº•å“ªäº›JSå¼‚å¸¸èƒ½è¢«æ•è·åˆ°å‘¢ï¼Ÿ</p></blockquote><a id="more"></a><blockquote><p><strong>ç®€å•è§£é‡Šå°±æ˜¯ï¼šåœ¨æŠ¥é”™çš„æ—¶å€™ï¼Œçº¿ç¨‹æ‰§è¡Œå·²ç»è¿›å…¥ <code>try catch</code> ä»£ç å—ï¼Œå¹¶ä¸”å¤„åœ¨ <code>try catch</code> é‡Œï¼Œæ‰èƒ½è¢«æ•æ‰åˆ°ã€‚</strong>ï¼ˆä¹‹å‰ï¼Œä¹‹åéƒ½æ— æ³•æ•æ‰å¼‚å¸¸ï¼‰</p></blockquote><ul><li><h6 id="ä¸‹é¢ä¸‰ä¸ªå°æ —å­ï¼Œè§£é‡Šä¸€ä¸‹-try-catch-çš„å‰ä¸­å"><a href="#ä¸‹é¢ä¸‰ä¸ªå°æ —å­ï¼Œè§£é‡Šä¸€ä¸‹-try-catch-çš„å‰ä¸­å" class="headerlink" title="ä¸‹é¢ä¸‰ä¸ªå°æ —å­ï¼Œè§£é‡Šä¸€ä¸‹ try catch çš„å‰ä¸­å"></a>ä¸‹é¢ä¸‰ä¸ªå°æ —å­ï¼Œè§£é‡Šä¸€ä¸‹ <code>try catch</code> çš„å‰ä¸­å</h6></li></ul><p>ğŸŒ° ä¾‹å­1ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    a(</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'error'</span>, e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output</span></span><br><span class="line">Uncaught <span class="built_in">SyntaxError</span>: Unexpected token &#125;</span><br></pre></td></tr></table></figure></p><p><em>ä¾‹å­1</em> è¯­æ³•å¼‚å¸¸ï¼ˆSyntaxErrorï¼‰ï¼Œå› ä¸ºè¯­æ³•å¼‚å¸¸æ˜¯åœ¨è¯­æ³•é˜¶æ®µå°±æŠ¥é”™äº†ï¼Œæ‰€ä»¥çº¿ç¨‹è¿˜æ²¡è¿›å…¥ <code>try catch</code> ä»£ç å—ï¼Œå°±æ•è·ä¸åˆ°å¼‚å¸¸ã€‚</p><p>ğŸŒ° ä¾‹å­2ï¼š<br><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function d () &#123;a.b&#125;</span><br><span class="line">try &#123;</span><br><span class="line">   d()</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">   console.log('error', e)</span><br><span class="line">&#125;</span><br><span class="line">// output</span><br><span class="line"><span class="keyword">error </span>ReferenceError: a is not defined</span><br></pre></td></tr></table></figure></p><p><em>ä¾‹å­2</em> æŠ¥é”™çš„æ—¶æœºï¼Œæ˜¯ä»£ç æ‰§è¡Œè¿›å…¥äº† <code>try catch</code> ï¼Œæ‰§è¡Œ d æ–¹æ³•çš„æ—¶å€™ï¼Œçº¿ç¨‹æ‰§è¡Œå¤„åœ¨ <code>try</code> é‡Œé¢ï¼Œæ‰€ä»¥èƒ½æ•æ‰åˆ°ã€‚</p><p>ğŸŒ° ä¾‹å­3ï¼š<br><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">   function d () &#123;a.b&#125;</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">   console.log('error', e)</span><br><span class="line">&#125;</span><br><span class="line">d()</span><br><span class="line">// output</span><br><span class="line"><span class="keyword">error </span>ReferenceError: a is not defined</span><br></pre></td></tr></table></figure></p><p><em>ä¾‹å­3</em> æ–¹æ³•å®šä¹‰åœ¨ <code>try catch</code> ä»£ç å—é‡Œï¼Œä½†æ˜¯æ‰§è¡Œæ–¹æ³•åœ¨ <code>try catch</code> å¤–ï¼Œæ‰§è¡Œ d æ–¹æ³•çš„æ—¶å€™æŠ¥é”™ï¼Œæ­¤æ—¶ try catch å·²ç»æ‰§è¡Œå®Œæˆï¼Œæ‰€ä»¥æ— æ³•æ•æ‰å¼‚å¸¸ã€‚</p><p>ä¸‰ä¸ªä¾‹å­ä¹‹ååº”è¯¥èƒ½ç†è§£æ€æ ·çš„JSå¼‚å¸¸å¯ä»¥è¢«æ•è·äº†ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬ç”¨ <code>promise</code> çš„æ—¶å€™å‘ç°ç›¸å¯¹äºå¤–éƒ¨çš„ <code>try catch</code> ï¼ŒPromise æ²¡æœ‰å¼‚å¸¸ï¼</p><h3 id="promise-amp-try-catch"><a href="#promise-amp-try-catch" class="headerlink" title="promise &amp; try catch"></a>promise &amp; try catch</h3><p>ğŸŒ° ä¾‹å­4ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    a.b</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>(v)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'error'</span>, e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output</span></span><br><span class="line">Uncaught (<span class="keyword">in</span> promise) <span class="built_in">ReferenceError</span>: a is not defined</span><br></pre></td></tr></table></figure></p><p><em>ä¾‹å­4</em> çº¿ç¨‹åœ¨æ‰§è¡Œa.bçš„æ—¶å€™ï¼Œé€‚æ—¶å‘å±äºåŒæ­¥æ‰§è¡Œï¼Œ<code>try catch</code> å¹¶æœªæ‰§è¡Œå®Œæˆï¼Œä¸ºä»€ä¹ˆæ•è·ä¸åˆ°å¼‚å¸¸å‘¢ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œ<strong>Promise çš„å¼‚å¸¸éƒ½æ˜¯ç”± reject å’Œ Promise.prototype.catch æ¥æ•è·</strong>ï¼Œä¸ç®¡æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ã€‚</p><p>æ ¸å¿ƒåŸå› æ˜¯å› ä¸º <code>Promise</code> åœ¨æ‰§è¡Œå›è°ƒä¸­éƒ½ç”¨ <code>try catch</code> åŒ…è£¹èµ·æ¥äº†ï¼Œå…¶ä¸­æ‰€æœ‰çš„å¼‚å¸¸éƒ½è¢«å†…éƒ¨æ•è·åˆ°äº†ï¼Œå¹¶æœªå¾€ä¸ŠæŠ›å¼‚å¸¸ï¼Œæ‰€ä»¥å¼‚å¸¸éƒ½ä¸ä¼šè¢«å¤–å±‚çš„ <code>try catch</code> æ•æ‰ã€‚</p><p>ğŸŒ° ä¾‹å­5ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>Â <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>Â <span class="keyword">new</span>Â <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,Â reject</span>)Â =&gt;</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>Â =&gt;</span>Â &#123;</span><br><span class="line">      reject(<span class="string">'æŠ¥é”™äº†'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">await</span>Â a()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'error'</span>, e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"><span class="comment">// output</span></span><br><span class="line">error æŠ¥é”™äº†</span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆ <em>ä¾‹å­5</em> çš„å¼‚å¸¸èƒ½è¢« <code>catch</code> æ•è·åˆ°å‘¢ï¼Œå› ä¸ºæŠ¥é”™çš„æ—¶å€™ï¼Œçº¿ç¨‹æ‰§è¡Œå·²ç»è¿›å…¥äº† <code>try catch</code> ä»£ç å—ï¼Œå¹¶ä¸”å¼‚å¸¸ç”± reject æŠ›å‡ºï¼Œè‡ªç„¶å¯ä»¥æ•è·åˆ°ã€‚</p><p> ###æ€»ç»“ï¼š</p><blockquote><p><strong>1. åœ¨æŠ¥é”™çš„æ—¶å€™ï¼Œçº¿ç¨‹æ‰§è¡Œå·²ç»è¿›å…¥ <code>try catch</code> ä»£ç å—ï¼Œå¹¶ä¸”å¤„åœ¨ <code>try catch</code> é‡Œï¼Œæ‰èƒ½è¢«æ•æ‰åˆ°ã€‚</strong></p></blockquote><blockquote><p><strong>2. ä¸è¦ç”¨ <code>try catch</code> åŒ…è£¹ <code>Promise</code>ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™ <code>Promise</code> å¢åŠ  Promise#catch å°± OK äº†</strong></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å†™ä»£ç æ—¶ç»å¸¸ä¼šç”¨åˆ° &lt;code&gt;try catch&lt;/code&gt;ï¼Œé˜²æ­¢ä¸€äº›JSæŠ¥é”™ï¼Œå¯¼è‡´é¡µé¢æŒ‚æ‰ã€‚é‚£ä¹ˆåˆ°åº•å“ªäº›JSå¼‚å¸¸èƒ½è¢«æ•è·åˆ°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="js" scheme="http://yoursite.com/categories/js/"/>
    
    
      <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>EventLoop çš„ç®€å•ç†è§£</title>
    <link href="http://yoursite.com/2020/07/28/eventLoop/"/>
    <id>http://yoursite.com/2020/07/28/eventLoop/</id>
    <published>2020-07-28T02:13:09.000Z</published>
    <updated>2020-09-04T02:15:23.937Z</updated>
    
    <content type="html"><![CDATA[<h3 id="EventLoopæ˜¯ä»€ä¹ˆ"><a href="#EventLoopæ˜¯ä»€ä¹ˆ" class="headerlink" title="EventLoopæ˜¯ä»€ä¹ˆ"></a>EventLoopæ˜¯ä»€ä¹ˆ</h3><blockquote><p>ä¸€ä¸ªå¾ªç¯ æ¯æ¬¡å¾ªç¯å«tick æ¯æ¬¡å¾ªç¯çš„ä»£ç å«task</p></blockquote><ul><li>V8å¼•æ“å•çº¿ç¨‹æ— æ³•åŒæ—¶å¹²ä¸¤ä»¶äº‹</li><li>æ–‡ä»¶è¯»å–ã€ç½‘ç»œIOç¼“æ…¢ä¸”å…·æœ‰ä¸ç¡®å®šæ€§</li><li>è¦é€šè¿‡å¼‚æ­¥å›è°ƒæ–¹å¼å¤„ç†åˆç§°ä¸ºå¼‚æ­¥IO</li><li>å…ˆåŒæ­¥å†å¼‚æ­¥ å¼‚æ­¥æ”¾å…¥é˜Ÿåˆ—ç­‰åŒæ­¥å®Œæˆåå†æ‰§è¡Œ æ¯æ¬¡å¾ªç¯å«ä¸€ä¸ªtick(process.nextTick())</li></ul><a id="more"></a><h3 id="å¼‚æ­¥ä»»åŠ¡çš„åŒºåˆ†"><a href="#å¼‚æ­¥ä»»åŠ¡çš„åŒºåˆ†" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„åŒºåˆ†"></a>å¼‚æ­¥ä»»åŠ¡çš„åŒºåˆ†</h3><p>microtasks(å¾®ä»»åŠ¡)ï¼š</p><blockquote><p>å”¯ä¸€ï¼Œæ•´ä¸ªäº‹ä»¶å¾ªç¯ä¸­ä»…å­˜åœ¨ä¸€ä¸ªï¼›æ‰§è¡Œä¸ºåŒæ­¥ï¼ŒåŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­çš„microtasksä¼šæŒ‰é˜Ÿåˆ—é¡ºåºä¸²è¡Œæ‰§è¡Œå®Œæ¯•</p><ul><li>process.nextTick</li><li>promise</li><li>Object.observe</li><li>MutationObserver</li></ul></blockquote><p>macrotask(å®ä»»åŠ¡)ï¼š</p><ul><li>setTimeout</li><li>serInterval</li><li>setImmediate</li><li>I/O</li><li>UIæ¸²æŸ“</li></ul><blockquote><p>å…ˆæ‰§è¡Œå¾®ä»»åŠ¡ å†æ‰§è¡Œå®ä»»åŠ¡</p></blockquote><p>å¦‚æœé‡åˆ°asyncçš„ä»£ç  awaitåé¢çš„ç¨‹åºå°±æŒ‚èµ· ç±»ä¼¼äºå¾®ä»»åŠ¡ ç­‰åˆ°åé¢çš„åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œäº†å†æ‰§è¡Œ</p><p>æœ€åä¸Šä¸€ä¸ªå°æ —å­ğŸŒ°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'resolve'</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;))</span><br><span class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'promise then ...'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"fun start"</span>)</span><br><span class="line">  <span class="keyword">const</span> aa = <span class="keyword">await</span> <span class="number">1</span> <span class="comment">// åˆ°è¿™é‡ŒæŒ‚èµ·ï¼Œåé¢å…ˆä¸æ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"fun end"</span>)</span><br><span class="line">&#125;</span><br><span class="line">fun()</span><br><span class="line"></span><br><span class="line"><span class="comment">// setTimeout æ”¾å…¥event tableä¸­ 1ç§’åå°†å›è°ƒå‡½æ•°æ”¾å…¥å®ä»»åŠ¡çš„event queueä¸­</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout ...'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">process.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'nextTick ...'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'console ...'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// output</span></span><br><span class="line">resolve</span><br><span class="line">fun start</span><br><span class="line"><span class="built_in">console</span> ...</span><br><span class="line">nextTick ...</span><br><span class="line">promise then ...</span><br><span class="line">fun end</span><br><span class="line">setTimeout ...</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;EventLoopæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#EventLoopæ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;EventLoopæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;EventLoopæ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªå¾ªç¯ æ¯æ¬¡å¾ªç¯å«tick æ¯æ¬¡å¾ªç¯çš„ä»£ç å«task&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;V8å¼•æ“å•çº¿ç¨‹æ— æ³•åŒæ—¶å¹²ä¸¤ä»¶äº‹&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶è¯»å–ã€ç½‘ç»œIOç¼“æ…¢ä¸”å…·æœ‰ä¸ç¡®å®šæ€§&lt;/li&gt;
&lt;li&gt;è¦é€šè¿‡å¼‚æ­¥å›è°ƒæ–¹å¼å¤„ç†åˆç§°ä¸ºå¼‚æ­¥IO&lt;/li&gt;
&lt;li&gt;å…ˆåŒæ­¥å†å¼‚æ­¥ å¼‚æ­¥æ”¾å…¥é˜Ÿåˆ—ç­‰åŒæ­¥å®Œæˆåå†æ‰§è¡Œ æ¯æ¬¡å¾ªç¯å«ä¸€ä¸ªtick(process.nextTick())&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="js" scheme="http://yoursite.com/categories/js/"/>
    
    
      <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>JSä½œç”¨åŸŸæ·±å…¥ç†è§£</title>
    <link href="http://yoursite.com/2020/03/24/scope/"/>
    <id>http://yoursite.com/2020/03/24/scope/</id>
    <published>2020-03-24T06:01:45.000Z</published>
    <updated>2020-11-24T06:14:47.266Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><blockquote><p>ä½œç”¨åŸŸæ˜¯æŒ‡ç¨‹åºæºä»£ç ä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼ŒJavaScript é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼ˆlexical scopingï¼‰ï¼Œä¹Ÿå°±æ˜¯<strong>é™æ€ä½œç”¨åŸŸ</strong>ã€‚</p></blockquote><h3 id="é™æ€ä½œç”¨åŸŸ-amp-åŠ¨æ€ä½œç”¨åŸŸ"><a href="#é™æ€ä½œç”¨åŸŸ-amp-åŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="é™æ€ä½œç”¨åŸŸ &amp; åŠ¨æ€ä½œç”¨åŸŸ"></a>é™æ€ä½œç”¨åŸŸ &amp; åŠ¨æ€ä½œç”¨åŸŸ</h3><p><strong>é™æ€</strong> ï¼šå› ä¸º JavaScript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚<br><strong>åŠ¨æ€</strong> ï¼šè€Œä¸è¯æ³•ä½œç”¨åŸŸç›¸å¯¹çš„æ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰å†³å®šçš„ã€‚</p><a id="more"></a><p> çœ‹ä¸ªä¾‹å­ğŸŒ°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">2</span></span><br><span class="line">  foo()</span><br><span class="line">&#125;</span><br><span class="line">bar()  <span class="comment">// è¾“å‡ºç¥é©¬å‘¢ï¼Ÿ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ï¼šJavaScripté‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸã€‚</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰æ—¶å°±å†³å®šäº†ã€‚</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œåˆ°fooå‡½æ•°ï¼Œå…ˆä»fooå‡½æ•°å†…éƒ¨æŸ¥æ‰¾å±€éƒ¨å˜é‡valueã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰å°±æ ¹æ®ä¹¦å†™ä½ç½®ï¼ŒæŸ¥æ‰¾ä¸Šé¢ä¸€å±‚ä»£ç ï¼Œä¹Ÿå°±æ˜¯value = 1ã€‚</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ç»“æœæ˜¯1ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾ï¼šJavaScripté‡‡ç”¨çš„æ˜¯åŠ¨æ€ä½œç”¨åŸŸã€‚</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°è°ƒç”¨æ—¶å†³å®šã€‚</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œåˆ°fooå‡½æ•°ï¼Œå…ˆä»fooå‡½æ•°å†…éƒ¨æŸ¥æ‰¾å±€éƒ¨å˜é‡valueã€‚</span></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰å°±ä»è°ƒç”¨å‡½æ•°çš„ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯barå‡½æ•°å†…éƒ¨æŸ¥æ‰¾valueå˜é‡ï¼Œä¹Ÿå°±æ˜¯value = 2ã€‚</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥ç»“æœæ˜¯2ã€‚</span></span><br></pre></td></tr></table></figure></p><p>å‰é¢è¯´äº†ï¼šJavaScripté‡‡ç”¨çš„æ˜¯é™æ€ä½œç”¨åŸŸï¼Œæ‰€ä»¥è¿™ä¸ªä¾‹å­çš„ç»“æœæ˜¯ 1ã€‚</p><p>å¦‚æœé—®åˆ° JavaScript çš„æ‰§è¡Œé¡ºåºï¼Œé‚£ä¹ˆç›´è§‚çš„å°è±¡å°±æ˜¯é¡ºåºæ‰§è¡Œã€‚ç„¶è€Œ JavaScript å¼•æ“å¹¶éä¸€è¡Œä¸€è¡Œçš„åˆ†æå’Œæ‰§è¡Œï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µçš„åˆ†ææ‰§è¡Œã€‚æ‰§è¡Œä¸€æ®µä»£ç çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œä¸€ä¸ªâ€œå‡†å¤‡å·¥ä½œâ€ï¼Œæ¯”å¦‚å˜é‡æå‡ã€å‡½æ•°æå‡ã€‚</p><p>é‚£è¿™ä¸ªâ€œä¸€æ®µâ€æ˜¯æ€ä¹ˆåˆ’åˆ†çš„ï¼Ÿæ€æ ·â€œå‡†å¤‡å·¥ä½œâ€å‘¢ï¼Ÿ</p><blockquote><p>å½“æ‰§è¡Œåˆ°ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡Œâ€œå‡†å¤‡å·¥ä½œâ€ï¼Œç”¨ä¸ªæ›´ä¸“ä¸šçš„è¯´æ³•å°±æ˜¯â€œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆexecution contextï¼‰â€ã€‚</p></blockquote><h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h2><p>é‚£å¯æ˜¯å‡½æ•°æœ‰å¾ˆå¤šï¼Œæ€ä¹ˆç®¡ç†è¿™ä¹ˆå¤šçš„æ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ</p><p>JavaScript å¼•æ“åˆ›å»ºäº† <strong>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</strong>ï¼ˆExecution context stack, ECSï¼‰æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><p>æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„è¡Œä¸ºï¼Œæˆ‘ä»¬å®šä¹‰æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ECStack = []</span><br></pre></td></tr></table></figure></p><p>å½“ JavaScript å¼€å§‹è¦è§£é‡Šæ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œæœ€å…ˆé‡åˆ°çš„æ˜¯å…¨å±€ä»£ç ï¼Œæ‰€ä»¥åˆå§‹åŒ–çš„æ—¶å€™é¦–å…ˆä¼šå‘æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå‹å…¥ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç”¨ <code>globalContext</code> è¡¨ç¤ºï¼Œå¹¶ä¸”åªæœ‰å½“æ•´ä¸ªåº”ç”¨ç¨‹åºç»“æŸçš„æ—¶å€™ï¼ŒECStaskæ‰ä¼šè¢«æ¸…ç©ºï¼Œæ‰€ä»¥ECStaskæœ€åº•éƒ¨æ°¸è¿œæœ‰ä¸ª globalContext:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ECStask = [</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>ğŸŒ°ä¾‹å¦‚è¿™æ®µä»£ç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn3'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  fn3()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  fn2()</span><br><span class="line">&#125;</span><br><span class="line">fn1()</span><br></pre></td></tr></table></figure></p><p>å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œå°±ä¼šå°†å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºã€‚æ‰€ä»¥ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ªä»£ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fn1()</span></span><br><span class="line">ECStask.push(<span class="xml"><span class="tag">&lt;<span class="name">fn1</span>&gt;</span> functionContext)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">// fn1è°ƒç”¨äº†fn2ï¼Œåˆ›å»ºfn2çš„æ‰§è¡Œä¸Šä¸‹æ–‡</span></span><br><span class="line">ECStask.push(&lt;fn2&gt; functionContext)</span><br><span class="line"></span><br><span class="line">// fn2è°ƒç”¨äº†fn3ï¼Œå†åˆ›å»ºfn3çš„æ‰§è¡Œä¸Šä¸‹æ–‡</span><br><span class="line">ECStask.push(&lt;fn3&gt; functionContext)</span><br><span class="line"></span><br><span class="line">// fn3æ‰§è¡Œå®Œæ¯•</span><br><span class="line">ECStack.pop();</span><br><span class="line"></span><br><span class="line">// fn2æ‰§è¡Œå®Œæ¯•</span><br><span class="line">ECStack.pop();</span><br><span class="line"></span><br><span class="line">// fn1æ‰§è¡Œå®Œæ¯•</span><br><span class="line">ECStack.pop();</span><br></pre></td></tr></table></figure></p><p>å†çœ‹ä¸¤ä¸ªç›¸ä¼¼çš„ä¾‹å­ğŸŒ°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">'blobal scope'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">'local scope'</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> scope</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f()</span><br><span class="line">&#125;</span><br><span class="line">checkscope()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">// ECStask.push(&lt;checkscope&gt; functionContext)</span></span><br><span class="line"><span class="comment">// ECStask.push(&lt;f&gt; functionContext)</span></span><br><span class="line"><span class="comment">// ECStack.pop()</span></span><br><span class="line"><span class="comment">// ECStack.pop()</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">'blobal scope'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">'local scope'</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> scope</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f</span><br><span class="line">&#125;</span><br><span class="line">checkscope()()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">// ECStask.push(&lt;checkscope&gt; functionContext)</span></span><br><span class="line"><span class="comment">// ECStack.pop()</span></span><br><span class="line"><span class="comment">// ECStask.push(&lt;f&gt; functionContext)</span></span><br><span class="line"><span class="comment">// ECStack.pop()</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯¹äºæ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§ï¼š</p><ul><li>å˜é‡å¯¹è±¡ï¼ˆVariable objectï¼ŒVOï¼‰</li><li>ä½œç”¨åŸŸé“¾ï¼ˆScope chainï¼‰</li><li>this</li></ul></blockquote><h2 id="å˜é‡å¯¹è±¡"><a href="#å˜é‡å¯¹è±¡" class="headerlink" title="å˜é‡å¯¹è±¡"></a>å˜é‡å¯¹è±¡</h2><p>å˜é‡å¯¹è±¡æ˜¯ä¸ æ‰§è¡Œä¸Šä¸‹æ–‡ ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå­˜å‚¨äº†åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚</p><p>å› ä¸ºä¸åŒæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸åŒï¼Œæ‰€ä»¥æ¥äº†è§£ <code>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡</code> å’Œ <code>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡</code>ã€‚</p><h3 id="å…¨å±€ä¸Šä¸‹æ–‡"><a href="#å…¨å±€ä¸Šä¸‹æ–‡" class="headerlink" title="å…¨å±€ä¸Šä¸‹æ–‡"></a>å…¨å±€ä¸Šä¸‹æ–‡</h3><blockquote><p>å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡å°±æ˜¯ <strong>å…¨å±€å¯¹è±¡</strong></p></blockquote><p>æ‰§è¡Œå…¨å±€ä»£ç æ—¶ï¼Œåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¨å±€ä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œç„¶ååˆå§‹åŒ–ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</span></span><br><span class="line">ECStack = [</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br><span class="line"><span class="comment">// å…¨å±€ä¸Šä¸‹æ–‡åˆå§‹åŒ–</span></span><br><span class="line">globalContext = &#123;</span><br><span class="line">  VO: [global],</span><br><span class="line">  Scope: [globalContext.VO],</span><br><span class="line">  <span class="keyword">this</span>: globalContext.VO</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°ä¸Šä¸‹æ–‡"><a href="#å‡½æ•°ä¸Šä¸‹æ–‡" class="headerlink" title="å‡½æ•°ä¸Šä¸‹æ–‡"></a>å‡½æ•°ä¸Šä¸‹æ–‡</h3><p>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬ç”¨æ´»åŠ¨å¯¹è±¡ï¼ˆactivation object, AOï¼‰æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚</p><p>æ´»åŠ¨å¯¹è±¡æ˜¯åœ¨è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ»è¢«åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„ <code>arguments</code> å±æ€§åˆå§‹åŒ–ã€‚<code>arguments</code> å±æ€§å€¼æ˜¯ <code>Arguments</code> å¯¹è±¡ã€‚</p><h3 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h3><p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç ä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼š</p><blockquote><ol><li>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</li><li>ä»£ç æ‰§è¡Œ</li></ol></blockquote><h4 id="è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡"></a>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</h4><p>å½“è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œè¿™æ—¶å€™è¿˜æ²¡æœ‰æ‰§è¡Œä»£ç ï¼Œå˜é‡å¯¹è±¡ä¼šåŒ…æ‹¬ï¼š</p><ol><li><strong>å‡½æ•°çš„æ‰€æœ‰å½¢å‚</strong>ï¼ˆå¦‚æœæ˜¯å‡½æ•°ä¸Šä¸‹æ–‡ï¼‰ <ul><li>ç”±åç§°å’Œå¯¹åº”ç»„æˆçš„ä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º</li><li>æ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸º undefined</li></ul></li><li><strong>å‡½æ•°å£°æ˜</strong><ul><li>ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆå‡½æ•°å¯¹è±¡function-objectï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º</li><li>å¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§</li></ul></li><li><strong>å˜é‡å£°æ˜</strong><ul><li>ç”±åç§°å’Œå¯¹åº”å€¼ï¼ˆundefinedï¼‰ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡çš„å±æ€§è¢«åˆ›å»º</li><li>å¦‚æœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§</li></ul></li></ol><p>ä¾‹å­ğŸŒ°æ¥äº†ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">c</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  b = <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><p>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œè¿™æ—¶å€™çš„AOæ˜¯ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  <span class="built_in">arguments</span>: &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">    length: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="literal">undefined</span>,</span><br><span class="line">  c: reference to <span class="function"><span class="keyword">function</span> <span class="title">c</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  d: undefind</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œæ ¹æ®ä»£ç ä¿®æ”¹å˜é‡å¯¹è±¡çš„å€¼ï¼Œæ‰€ä»¥æ‰§è¡Œä»£ç åçš„AOæ˜¯ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">  <span class="built_in">arguments</span>: &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="number">1</span>,</span><br><span class="line">    length: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">3</span>,</span><br><span class="line">  c: reference to <span class="function"><span class="keyword">function</span> <span class="title">c</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  d: reference to FunctionExpression <span class="string">"d"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥<strong>å˜é‡å¯¹è±¡</strong>æ€»ç»“å‡ å¥æ˜¯ï¼š</p><ol><li>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡</li><li>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ Arguments å¯¹è±¡</li><li>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹åŒ–å±æ€§å€¼</li><li>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼</li></ol><h2 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h2><p>å½“åœ¨æŸ¥æ‰¾å˜é‡çš„æ—¶å€™ï¼Œä¼šå…ˆä»å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä»çˆ¶çº§æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ã€‚è¿™æ ·ç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä¸ªå‡½æ•°çš„åˆ›å»ºå’Œæ¿€æ´»ä¸¤ä¸ªæ—¶æœŸæ¥è®²è§£ä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•åˆ›å»ºå’Œå˜åŒ–çš„ã€‚</p><h3 id="å‡½æ•°åˆ›å»º"><a href="#å‡½æ•°åˆ›å»º" class="headerlink" title="å‡½æ•°åˆ›å»º"></a>å‡½æ•°åˆ›å»º</h3><p>ä¸Šæ–‡è®²åˆ° JavaScript æ˜¯é™æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚</p><p>è¿™æ˜¯å› ä¸ºå‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§<code>[[scope]]</code>ï¼Œå½“å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šä¿å­˜æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡åˆ°é‡Œé¢ï¼Œå¯ä»¥ç†è§£ä¸º<code>[[scope]]</code>å°±æ˜¯æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ï¼ˆå¹¶ä¸ä»£è¡¨å®Œæ•´çš„ä½œç”¨åŸŸé“¾ï¼‰ã€‚</p><p>ä¾‹å­ğŸŒ°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡½æ•°åˆ›å»ºæ—¶ï¼Œå„è‡ªçš„[[scope]]ä¸ºï¼š</span></span><br><span class="line"><span class="comment">// foo.[[scope]] = [</span></span><br><span class="line"><span class="comment">//   globalContext.VO</span></span><br><span class="line"><span class="comment">// ]</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// bar.[[scope]] = [</span></span><br><span class="line"><span class="comment">//   fooContext.AO,</span></span><br><span class="line"><span class="comment">//   blobalContext.VO</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°æ¿€æ´»"><a href="#å‡½æ•°æ¿€æ´»" class="headerlink" title="å‡½æ•°æ¿€æ´»"></a>å‡½æ•°æ¿€æ´»</h3><p>å½“å‡½æ•°æ¿€æ´»æ—¶è¿›å…¥å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œåˆ›å»ºVO/AOåï¼Œå°±ä¼šå°†æ´»åŠ¨å¯¹è±¡æ·»åŠ åˆ°ä½œç”¨åŸŸé“¾çš„å‰ç«¯ã€‚</p><p>è¿™æ—¶å€™æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å‘½åä¸º Scope:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Scope = [AO].concat([[Scope]])</span><br></pre></td></tr></table></figure></p><p>ä½œç”¨åŸŸé“¾åˆ›å»ºå®Œæ¯•~</p><h2 id="ç¼•ç¼•é¡º"><a href="#ç¼•ç¼•é¡º" class="headerlink" title="ç¼•ç¼•é¡º"></a>ç¼•ç¼•é¡º</h2><p>å› ä¸ºå¦‚æœç›´æ¥è¯´å®Œå‡½æ•°çš„ä½œç”¨åŸŸå°±è®²ä½œç”¨åŸŸé“¾çš„è¯ï¼Œé‡Œé¢çš„æ‰§è¡Œä¸Šä¸‹æ–‡å°±ä¼šæ‡µã€‚æ‰€ä»¥å…ˆè¯´çš„å‡½æ•°æ‰§è¡Œé‡Œé¢çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ‰è¯´çš„ä½œç”¨åŸŸé“¾ã€‚æœ‰ç‚¹ä¹±æ²¡å…³ç³»ï¼Œç°åœ¨æ¥ç¼•ç¼•é¡ºï¼Œå½“ js è§£é‡Šå™¨å¼€å§‹å·¥ä½œçš„æ—¶å€™ï¼š</p><ul><li>åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå¹¶åˆå§‹åŒ–</li><li>å‡½æ•°è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå°±æœ‰å†…éƒ¨å±æ€§ä½œç”¨åŸŸé“¾ [[scope]]</li><li>å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼š<ul><li>åˆ›å»ºå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­</li><li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆåˆå§‹åŒ–ï¼š<ul><li>å¤åˆ¶å‡½æ•° [[scope]] å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾</li><li>ç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡</li><li>åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼Œå³åŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜</li><li>å°†æ´»åŠ¨å¯¹è±¡ (AO) å‹å…¥ä½œç”¨åŸŸé“¾é¡¶ç«¯</li></ul></li><li>å‡½æ•°ä»£ç æ‰§è¡Œ</li></ul></li><li>å‡½æ•°æ‰§è¡Œç»“æŸçš„æ—¶å€™ï¼Œä½äºæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å¼¹å‡ºï¼Œç»§ç»­æ‰§è¡Œæ–°çš„ä½äºæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡</li></ul><blockquote><p>è¿™ç§æ–¹å¼ä¿è¯äº†åªæœ‰ä½äºæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡æ‰ä¼šè¢«æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å®ç°äº†å•çº¿ç¨‹ã€‚</p></blockquote><h2 id="ä¸€ä¸ªå¤§ä¾‹å­ğŸŒ°"><a href="#ä¸€ä¸ªå¤§ä¾‹å­ğŸŒ°" class="headerlink" title="ä¸€ä¸ªå¤§ä¾‹å­ğŸŒ°"></a>ä¸€ä¸ªå¤§ä¾‹å­ğŸŒ°</h2><p>ä»¥ä¸‹é¢ä¸ºä¾‹ï¼Œç»“åˆå˜é‡å¯¹è±¡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ä½œç”¨åŸŸé“¾å’Œå˜é‡å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope = <span class="string">'blobal scope'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scope = <span class="string">'local scope'</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> scope</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> f()</span><br><span class="line">&#125;</span><br><span class="line">checkscope()</span><br></pre></td></tr></table></figure></p><ol><li><p><strong>æ‰§è¡Œå…¨å±€ä»£ç </strong>ï¼Œåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ECStask = [</span><br><span class="line">  blobalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>å…¨å±€ä¸Šä¸‹æ–‡åˆå§‹åŒ–</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">blobalContext = &#123;</span><br><span class="line">  VO: [vlobal],</span><br><span class="line">  Scope: [globalContext.VO],</span><br><span class="line">  <span class="keyword">this</span>: globalContext.VO</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–çš„åŒæ—¶ï¼Œ<strong>checkscope å‡½æ•°è¢«åˆ›å»º</strong>ï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ°å†…éƒ¨å±æ€§[[scope]]</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checkscope.[[scope]] = [</span><br><span class="line">  blobalContext.VO</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œ checkscope å‡½æ•°</strong>ï¼Œåˆ›å»º checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ECStask = [</span><br><span class="line">  checkscopeContext,</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>checkscope å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–</strong>ï¼š</p><ul><li>å¤åˆ¶å‡½æ•° [[scope]] å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾</li><li>ç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡</li><li>åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ (AO)ï¼Œå³åŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜</li><li>å°†æ´»åŠ¨å¯¹è±¡å‹å…¥ checkscope ä½œç”¨åŸŸé“¾é¡¶ç«¯</li><li>åŒæ—¶ f å‡½æ•°è¢«åˆ›å»ºï¼Œä¿å­˜ä½œç”¨åŸŸé“¾åˆ° f å‡½æ•°çš„å†…éƒ¨å±æ€§ [[scope]]<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">checkscopeContext = &#123;</span><br><span class="line">  AO: &#123;</span><br><span class="line">    <span class="built_in">arguments</span>: &#123;</span><br><span class="line">      length: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    scope: <span class="literal">undefined</span>,</span><br><span class="line">    f: reference to <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  Scope: [AO, blobalContext.VO],</span><br><span class="line">  <span class="keyword">this</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fscope.[[scope]] = [</span><br><span class="line">  checkscopeContext.AO,</span><br><span class="line">  blobalContext.VO</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>æ‰§è¡Œ f å‡½æ•°</strong>ï¼Œåˆ›å»º f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œf å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ECStask = [</span><br><span class="line">  fContext,</span><br><span class="line">  checkscopeContext,</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>f å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åˆå§‹åŒ–</strong>ï¼Œå’Œç¬¬5æ­¥ç›¸ä¼¼ï¼š</p><ul><li>å¤åˆ¶å‡½æ•°[[scope]]å±æ€§åˆ›å»ºä½œç”¨åŸŸé“¾</li><li>ç”¨ arguments åˆ›å»ºæ´»åŠ¨å¯¹è±¡</li><li>åˆå§‹åŒ–æ´»åŠ¨å¯¹è±¡ï¼ˆAOï¼‰ï¼Œå³åŠ å…¥å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜</li><li>å°†æ´»åŠ¨å¯¹è±¡å‹å…¥ f ä½œç”¨åŸŸé“¾é¡¶ç«¯<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fContext = &#123;</span><br><span class="line">  AO: &#123;</span><br><span class="line">    <span class="built_in">arguments</span>: &#123;</span><br><span class="line">      length: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  Scope: [AO, checkscopeContext.AO, blobalContext.VO],</span><br><span class="line">  <span class="keyword">this</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>f å‡½æ•°æ‰§è¡Œ</strong>ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ scope å€¼ï¼Œè¿”å› scope å€¼</p></li><li><p><strong>f å‡½æ•°æ‰§è¡Œå®Œæ¯•</strong>ï¼Œf å‡½æ•°ä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ECStack = [</span><br><span class="line">  checkscopeContext,</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p><strong>checkscope å‡½æ•°æ‰§è¡Œå®Œæ¯•</strong>ï¼Œcheckscope æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­å¼¹å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ECStack = [</span><br><span class="line">  globalContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;ä½œç”¨åŸŸ&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä½œç”¨åŸŸæ˜¯æŒ‡ç¨‹åºæºä»£ç ä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼ŒJavaScript é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼ˆlexical scopingï¼‰ï¼Œä¹Ÿå°±æ˜¯&lt;strong&gt;é™æ€ä½œç”¨åŸŸ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;é™æ€ä½œç”¨åŸŸ-amp-åŠ¨æ€ä½œç”¨åŸŸ&quot;&gt;&lt;a href=&quot;#é™æ€ä½œç”¨åŸŸ-amp-åŠ¨æ€ä½œç”¨åŸŸ&quot; class=&quot;headerlink&quot; title=&quot;é™æ€ä½œç”¨åŸŸ &amp;amp; åŠ¨æ€ä½œç”¨åŸŸ&quot;&gt;&lt;/a&gt;é™æ€ä½œç”¨åŸŸ &amp;amp; åŠ¨æ€ä½œç”¨åŸŸ&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é™æ€&lt;/strong&gt; ï¼šå› ä¸º JavaScript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚&lt;br&gt;&lt;strong&gt;åŠ¨æ€&lt;/strong&gt; ï¼šè€Œä¸è¯æ³•ä½œç”¨åŸŸç›¸å¯¹çš„æ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰å†³å®šçš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="js" scheme="http://yoursite.com/categories/js/"/>
    
    
      <category term="js" scheme="http://yoursite.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>vue+vue-ueditor-wrap+ç§€ç±³</title>
    <link href="http://yoursite.com/2019/09/03/xiumi/"/>
    <id>http://yoursite.com/2019/09/03/xiumi/</id>
    <published>2019-09-03T09:44:15.000Z</published>
    <updated>2020-09-04T01:53:42.524Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ueditor+ç§€ç±³çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œgithubä¸Šçš„å¤§ç¥åšäº†ä¸€ä¸ªåŸºäºvueçš„ueditorçš„ç»„ä»¶ï¼Œèƒ½å¤Ÿå®ç°åŒå‘æ•°æ®ç»‘å®šï¼Œå¯ä»¥ä¸ç”¨è´¹åŠ²çš„getContentã€setContentã€‚å°±å†³å®šç”¨è¿™ä¸ªç»„ä»¶ â€”â€”  <a href="https://github.com/HaoChuan9421/vue-ueditor-wrap" target="_blank" rel="noopener">vue-ueditor-wrap</a>    ã€‚so~  vue+vue-ueditor-wrap+ç§€ç±³. å¼€å§‹å§ â¤µï¸</p><a id="more"></a><p><strong>ä¸€ï¼šå»ueditorå®˜ç½‘ä¸‹è½½å®˜æ–¹æºç </strong> </p><ol><li><p><a href="https://ueditor.baidu.com/website/download.html" target="_blank" rel="noopener">https://ueditor.baidu.com/website/download.html</a></p></li><li><p>ä¸‹è½½å®Œæˆåï¼Œæ”¾åˆ°ä½ çš„Vueé¡¹ç›®é‡Œstaticä¸‹å¹¶å‘½åä¸ºUEditorã€‚</p></li></ol><p><strong>äºŒï¼šå®‰è£…vue-ueditor-wrap</strong> </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-ueditor-wrap</span><br></pre></td></tr></table></figure><p><strong>ä¸‰ï¼šå¼•å…¥å¹¶ä½¿ç”¨</strong> </p><ol><li><p>main.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The Vue build version to load with the `import` command</span></span><br><span class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="comment">// å¼•å…¥ueditorçš„ä¾èµ–æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../static/UEditor/ueditor.config'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../static/UEditor/ueditor.all.min.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../static/UEditor/lang/zh-cn/zh-cn.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../static/UEditor/ueditor.parse.min.js'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶é‡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"hello"</span>&gt;</span><br><span class="line">  &lt;!--æ•°æ®ç»‘å®š--&gt;</span><br><span class="line">    &lt;vue-ueditor-wrap v-model=<span class="string">"msg"</span> /&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123;msg&#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import VueUeditorWrap from 'vue-ueditor-wrap' /</span><span class="regexp">/ å¼•å…¥vue-ueditor-wrap</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  name: 'HelloWorld',</span></span><br><span class="line"><span class="regexp">  components: &#123;</span></span><br><span class="line"><span class="regexp">    VueUeditorWrap/</span><span class="regexp">/æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  data () &#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">      msg: 'Welcome to Your Vue.js App'</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>è¿™äº›å®Œæˆåï¼Œä½ å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåˆå§‹åŒ–å¥½çš„<code>ueditor</code>äº†ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç»‘å®šæƒ³è¦çš„æ•°æ® ?<br>æ¥å…¥<strong>ç§€ç±³</strong>çš„ç«¥é‹ç»§ç»­å‘ä¸‹çœ‹?</p><p><strong>å››ï¼šåœ¨ueditoråŸºç¡€ä¸Šæ¥å…¥ç§€ç±³</strong></p><p>ç§€ç±³æä¾›ï¼š<a href="http://hgs.xiumi.us/uedit/" target="_blank" rel="noopener">ç§€ç±³å›¾æ–‡æ’ç‰ˆUEditoræ’ä»¶ç¤ºä¾‹</a></p><ol><li><p>åœ¨ä½ çš„index.htmlä¸­å¼•ç”¨ <code>http://xiumi.us/connect/ue/xiumi-ue-dialog-v5.js</code> å’Œ <code>http://xiumi.us/connect/ue/xiumi-ue-v5.css</code> ä¹Ÿå¯ä»¥ä¸‹è½½æ–‡ä»¶åæ”¾åœ¨UEditorç›®å½•ä¸‹å¼•å…¥æœ¬åœ°æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿ä¿®æ”¹ã€‚ï¼ˆæˆ‘æ˜¯ä¸‹è½½åå¼•å…¥æœ¬åœ°çš„ï¼‰å¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"static/UEditor/xiumi-ue-v5.css"</span>&gt;</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> charset=<span class="string">"utf-8"</span> src=<span class="string">"static/UEditor/xiumi-ue-dialog-v5.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>ä¸‹è½½æ–‡ä»¶ <code>http://xiumi.us/connect/ue/xiumi-ue-dialog-v5.html</code> å’Œ <code>http://hgs.xiumi.us/uedit/dialogs/internal.js</code> æ”¾åœ¨ä½ çš„UEditorç›®å½•ä¸‹ã€‚</p></li><li><p>ä¿®æ”¹<code>UEditor</code>çš„é…ç½®ï¼ˆueditor.config.jsï¼‰ï¼Œç¬¬414è¡Œå·¦å³ï¼šå°†section:[] æ”¹ä¸ºsection:[â€˜classâ€™, â€˜styleâ€™]ï¼Œé¿å…ueditorä¿®æ”¹ç§€ç±³çš„æ ¼å¼ä¿¡æ¯ï¼Œé€ æˆæ’ç‰ˆé”™è¯¯ã€‚</p></li><li><p>åœ¨<code>xiumi-ue-dialog-v5.js</code>ä¸­æŠŠ<code>iframeUrl</code>æ”¹ä¸ºæœ¬åœ°ç§€ç±³H5çš„è·¯å¾„ï¼Œå¦‚æœä½ éƒ½æ˜¯æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤è¿›è¡Œé‚£ä¹ˆè·¯å¾„å°†æ˜¯<code>/static/UEditor/xiumi-ue-dialog-v5.html</code>ï¼Œå¦‚æœä¸æ˜¯çš„è¯è¦æŒ‰ä½ è‡ªå·±çš„è·¯å¾„ã€‚</p></li></ol><p>åˆ°è¿™é‡Œå°±æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ç§€ç±³å¹¶ä¸”æœ‰ç€åŒå‘æ•°æ®ç»‘å®šçš„ueditorå•¦ã€‚<br>å›¾ç‰‡ä¸Šä¼ ç›¸å…³åŠŸèƒ½éœ€è¦åå°å°å“¥å“¥çš„ååŠ©ã€‚<br>å…¶ä½™ä¸ç§€ç±³çš„å¯¹æ¥å¯ä»¥å‚è€ƒ<a href="http://ent.xiumi.us/" target="_blank" rel="noopener">ä¸ç§€ç±³å¯¹æ¥</a><br>è¿˜æ˜¯æœ‰ç–‘é—®çš„å°ç›†å‹å¯ä»¥ä¸‹è½½æˆ‘ä¸Šä¼ çš„<a href="https://github.com/Yu-Lxy/vue-ueditor-wrap-xiumi" target="_blank" rel="noopener">demo</a>ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°ä½ ğŸ˜œ</p><p>è¿™æ˜¯æ¥å¥½åçš„æ ·çº¸ï¼š<br><img src="/2019/09/03/xiumi/1599127298698.jpg" alt="ç§€ç±³"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ueditor+ç§€ç±³çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œgithubä¸Šçš„å¤§ç¥åšäº†ä¸€ä¸ªåŸºäºvueçš„ueditorçš„ç»„ä»¶ï¼Œèƒ½å¤Ÿå®ç°åŒå‘æ•°æ®ç»‘å®šï¼Œå¯ä»¥ä¸ç”¨è´¹åŠ²çš„getContentã€setContentã€‚å°±å†³å®šç”¨è¿™ä¸ªç»„ä»¶ â€”â€”  &lt;a href=&quot;https://github.com/HaoChuan9421/vue-ueditor-wrap&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;vue-ueditor-wrap&lt;/a&gt;    ã€‚so~  vue+vue-ueditor-wrap+ç§€ç±³. å¼€å§‹å§ â¤µï¸&lt;/p&gt;
    
    </summary>
    
      <category term="vue" scheme="http://yoursite.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>hexoæ­å»ºä¸ªäººåšå®¢</title>
    <link href="http://yoursite.com/2019/03/01/buildHexo/"/>
    <id>http://yoursite.com/2019/03/01/buildHexo/</id>
    <published>2019-03-01T09:32:15.000Z</published>
    <updated>2020-09-04T02:35:57.146Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ç§ç±»å‹çš„åšå®¢å°±èµ¶è„šé€¼æ ¼å¾ˆé«˜çš„æ ·çº¸ ğŸ˜</p><p>åæ¥è¯•ç€æ­èµ·æ¥è§‰å¾—å¹¶ä¸å›°éš¾ â˜ï¸</p><p>ç®€å•æ¥è¯´hexoå°±æ˜¯ä¸€ä¸ªé™æ€é¡µé¢ç”Ÿæˆå’Œåˆ›å»ºçš„å·¥å…·</p><p>è¿™ç¯‡æ•™ä½ æ­å»ºä¸€ä¸ªè‡ªå·±çš„hexoåšå®¢ ğŸ‘‰</p><a id="more"></a><h3 id="æˆ‘çš„æ­å»ºæ­¥éª¤æœ‰ä»¥ä¸‹ï¼š"><a href="#æˆ‘çš„æ­å»ºæ­¥éª¤æœ‰ä»¥ä¸‹ï¼š" class="headerlink" title="æˆ‘çš„æ­å»ºæ­¥éª¤æœ‰ä»¥ä¸‹ï¼š"></a>æˆ‘çš„æ­å»ºæ­¥éª¤æœ‰ä»¥ä¸‹ï¼š</h3><ul><li>å®‰è£…Git</li><li>å®‰è£…Node.js</li><li>å®‰è£…Hexo</li><li>GitHubåˆ›å»ºä¸ªäººä»“åº“</li><li>ç”ŸæˆSSHæ·»åŠ åˆ°GitHub</li><li>å°†hexoéƒ¨ç½²åˆ°GitHub</li></ul><h3 id="1-å®‰è£…gitå’Œnode"><a href="#1-å®‰è£…gitå’Œnode" class="headerlink" title="1.å®‰è£…gitå’Œnode"></a>1.å®‰è£…gitå’Œnode</h3><p>gitå’Œnodeæ˜¯å¿…å¤‡æ¡ä»¶, å¯ä»¥æˆ³ï¼š<br><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">å»–é›ªå³°å¤§ç¥çš„gitæ•™ç¨‹</a><br><a href="http://nodejs.cn/download/" target="_blank" rel="noopener">ä¸‹è½½node</a></p><h3 id="2-å®‰è£…hexo"><a href="#2-å®‰è£…hexo" class="headerlink" title="2.å®‰è£…hexo"></a>2.å®‰è£…hexo</h3><p>gitå’Œnodeå®‰å¥½ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®‰hexoäº†<br>1.å¯ä»¥å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹ğŸŒ°:æˆ‘çš„æ˜¯myBlog<br>è¿›åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œæ‰“å¼€å‘½ä»¤è¡Œ<br>2.Windowsçš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥ç”¨ <code>npm install -g hexo</code><br>macçš„å°ä¼™ä¼´éœ€è¦ç”¨ <code>sudo npm install --unsafe-perm --verbose -g hexo</code><br>å®Œæˆä¹‹åå¯ä»¥ <code>hexo -v</code> æŸ¥çœ‹hexoç‰ˆæœ¬<br>3.æ¥ä¸‹æ¥åˆå§‹åŒ–hexo <code>hexo init</code><br>å®Œæˆä¹‹åä¼šåœ¨myBlogç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š</p><table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>node_modulesï¼š</td><td>æ˜¯ä¾èµ–åŒ…</td></tr><tr><td>publicï¼š</td><td>ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•æœ€ç»ˆä¼šå‘å¸ƒåˆ°æœåŠ¡å™¨</td></tr><tr><td>scaffoldsï¼š</td><td>å‘½ä»¤ç”Ÿæˆæ–‡ç« ç­‰çš„æ¨¡æ¿</td></tr><tr><td>sourceï¼š</td><td>ç¼–å†™çš„markdownæ–‡ä»¶ï¼Œ_draftsè‰ç¨¿æ–‡ä»¶ï¼Œ_postså‘å¸ƒçš„æ–‡ç« </td></tr><tr><td>themesï¼š</td><td>ä¸»é¢˜</td></tr><tr><td>_config.ymlï¼š</td><td>æ•´ä¸ªåšå®¢çš„é…ç½®</td></tr><tr><td>package.jsonï¼š</td><td>é¡¹ç›®æ‰€éœ€æ¨¡å—é¡¹ç›®çš„é…ç½®ä¿¡æ¯</td></tr></tbody></table><p>æˆ‘ä»¬æ­£å¸¸ä½¿ç”¨ï¼Œä¿®æ”¹æœ€å¤šçš„æºç æ˜¯ <code>_config.yml</code> æ–‡ä»¶ï¼Œä¸ç®¡æ˜¯åšå®¢çš„åŸºç¡€é…ç½®ï¼Œè¿˜æ˜¯æ¨¡æ¿ï¼Œéƒ½æ˜¯ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚<br><code>source</code> æ˜¯æˆ‘ä»¬æ—¥å¸¸å†™æ–‡ç« è¦ç”¨çš„ç›®å½•ï¼Œæ˜¯æˆ‘ä»¬æ—¥å¸¸æ“ä½œçš„æ–‡ä»¶å¤¹ã€‚<br>å¦‚æœè¦ä¿®æ”¹ä¸»é¢˜æ¨¡æ¿ï¼Œå°±éœ€è¦æ“ä½œ <code>themes</code>.</p><p>4.æ¥ä¸‹æ¥<br><code>hexo g</code><br><code>hexo s</code><br>å°±å¯ä»¥åœ¨æœ¬åœ° <code>http://localhost:4000</code> é¢„è§ˆäº†<br><code>ctrl+c</code> æˆ–æ˜¯ <code>control+c</code> å…³é—­æœ¬åœ°æœåŠ¡</p><h3 id="GitHubåˆ›å»ºä¸ªäººä»“åº“"><a href="#GitHubåˆ›å»ºä¸ªäººä»“åº“" class="headerlink" title="GitHubåˆ›å»ºä¸ªäººä»“åº“"></a>GitHubåˆ›å»ºä¸ªäººä»“åº“</h3><p>æ²¡æœ‰githubè´¦å·éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªå“¦<br>æœ‰è´¦å·å°±æ–°å»ºä¸€ä¸ªåº“ï¼š<br><img src="/2019/03/01/buildHexo/hexo1.jpg" alt="Create a new repository"><br>å»ºä¸€ä¸ªå’Œä½ çš„usernameä¸€æ ·åå­—çš„åº“ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯è¿™æ ·ï¼š<br><img src="/2019/03/01/buildHexo/hexo2.jpg" alt><br>ç‚¹å‡»create repository</p><h3 id="ç”ŸæˆSSHæ·»åŠ åˆ°GitHub-mac"><a href="#ç”ŸæˆSSHæ·»åŠ åˆ°GitHub-mac" class="headerlink" title="ç”ŸæˆSSHæ·»åŠ åˆ°GitHub(mac)"></a>ç”ŸæˆSSHæ·»åŠ åˆ°GitHub(mac)</h3><p>1.æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨SSH Key<br>æ‰“å¼€ç”µè„‘ç»ˆç«¯ï¼Œè¾“å…¥ <code>ls -al ~/.ssh</code><br>2.å¦‚æœç»ˆç«¯å‡ºç°æ–‡ä»¶id_rsa.pub æˆ– id_dsa.pubï¼Œåˆ™è¡¨ç¤ºè¯¥ç”µè„‘å·²ç»å­˜åœ¨SSH Keyï¼Œæ­¤æ—¶å¯ç»§ç»­è¾“å…¥<br><code>cat ~/.ssh/id_rsa.pub</code><br>å¤åˆ¶æ¥ä¸‹æ¥æ˜¾ç¤ºå‡ºæ¥çš„ä¸€å¤§ä¸²å†…å®¹<br>3.å¦‚æœç»ˆç«¯æœªå‡ºç°id_rsa.pub æˆ– id_dsa.pubæ–‡ä»¶ï¼Œè¡¨ç¤ºè¯¥ç”µè„‘è¿˜æ²¡æœ‰é…ç½®SSH Keyï¼Œæ­¤æ—¶éœ€è¦è¾“<br><code>ssh-keygen -t rsa -C &quot;your_full_name@xxxxx.com&quot;</code><br>è¿ç»­å›è½¦å³å¯ï¼Œä¹Ÿå¯èƒ½ä¼šè®©ä½ è¾“å…¥å¯†ç ï¼Œå¯†ç å°±æ˜¯ä½ çš„å¼€æœºå¯†ç <br>åˆ›å»ºå®ŒæˆåæŒ‰ç…§ç¬¬äºŒæ­¥æ“ä½œå¤åˆ¶å°±è¡Œå•¦<br>è¿™æ—¶å€™å»åˆ°GitHubçš„setting<img src="/2019/03/01/buildHexo/hexo3.jpg" alt><br>å†ç‚¹å‡»SSH and GPG keys<img src="/2019/03/01/buildHexo/hexo4.jpg" alt><br>ç‚¹å‡»New SSH keyä¹‹åå§ä½ åˆšåˆšå¤åˆ¶çš„ä¸€ä¸²keyç²˜åœ¨è¿™é‡Œé¢ ç‚¹å‡»Add SSH keyå°±okå•¦<br><img src="/2019/03/01/buildHexo/hexo5.jpg" alt></p><h3 id="å°†hexoéƒ¨ç½²åˆ°GitHub"><a href="#å°†hexoéƒ¨ç½²åˆ°GitHub" class="headerlink" title="å°†hexoéƒ¨ç½²åˆ°GitHub"></a>å°†hexoéƒ¨ç½²åˆ°GitHub</h3><p>å®Œæˆè¿™ä¸€æ­¥å°±å¯ä»¥æŠŠä½ çš„hexoéƒ¨ç½²åˆ°githubä¸Šè¾£<br>1.é¦–å…ˆåœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶ä¸‹æ‰¾åˆ° <code>_config.yml</code> è¿›å»æ‰¾åˆ°<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">repo</span>: <span class="attribute">https</span>:<span class="comment">//github.com/YourgithubName/YourgithubName.github.io.git</span></span><br><span class="line">  <span class="attribute">branch</span>: master</span><br></pre></td></tr></table></figure></p><p>æŠŠè¿™ä¸ªåœ°å€æ”¹æˆä½ ä¸“å±çš„ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ï¼š<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">repo:</span> <span class="string">https:</span><span class="comment">//github.com/Yu-Lxy/Yu-Lxy.github.io</span></span><br></pre></td></tr></table></figure></p><p>*æ³¨ï¼šè¿™é‡Œæœ‰ä¸ªå‘ğŸ•³ï¼Œä¸€å®šè¦åœ¨å†’å·åé¢åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä¸ç„¶ <code>hexo d</code> çš„æ—¶å€™ä¼šæ²¡æœ‰ååº”</p><p>2.éœ€è¦å®‰è£…deploy-git,ä¹Ÿå°±æ˜¯éƒ¨ç½²çš„å‘½ä»¤,è¿™æ ·ä½ æ‰èƒ½ç”¨å‘½ä»¤éƒ¨ç½²åˆ°GitHub:<br><code>npm install hexo-deployer-git --save</code><br>3.ç„¶å<br><code>hexo g</code><br><code>hexo d</code><br>è¾“å…¥ <code>http://yourname.github.io</code> å°±èƒ½çœ‹åˆ°ä½ çš„hexoå’¯~ğŸ˜†</p><p></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ç§ç±»å‹çš„åšå®¢å°±èµ¶è„šé€¼æ ¼å¾ˆé«˜çš„æ ·çº¸ ğŸ˜&lt;/p&gt;
&lt;p&gt;åæ¥è¯•ç€æ­èµ·æ¥è§‰å¾—å¹¶ä¸å›°éš¾ â˜ï¸&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´hexoå°±æ˜¯ä¸€ä¸ªé™æ€é¡µé¢ç”Ÿæˆå’Œåˆ›å»ºçš„å·¥å…·&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ•™ä½ æ­å»ºä¸€ä¸ªè‡ªå·±çš„hexoåšå®¢ ğŸ‘‰&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="http://yoursite.com/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
</feed>
